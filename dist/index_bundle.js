(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["$"] = factory();
	else
		root["$"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/loglevel/lib/loglevel.js":
/*!***********************************************!*\
  !*** ./node_modules/loglevel/lib/loglevel.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (true) {\n        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {}\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n\n\n//# sourceURL=webpack://$/./node_modules/loglevel/lib/loglevel.js?");

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n//# sourceURL=webpack://$/./node_modules/process/browser.js?");

/***/ }),

/***/ "./node_modules/simple-load-script/es5/simpleLoadScript.js":
/*!*****************************************************************!*\
  !*** ./node_modules/simple-load-script/es5/simpleLoadScript.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = getScript;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar glob = window;\nvar scripName = 'simpleLoadScript';\nvar globalCbsName = \"_$_\".concat(scripName, \"CallBacks_$_\");\nvar counter = 0;\n\nvar uid = function uid() {\n  return \"script-\".concat(counter++);\n};\n\nvar type = function type(obj) {\n  return Object.prototype.toString.call(obj).slice(8, -1).toLowerCase();\n};\n\nvar typeObj = function typeObj(obj) {\n  return type(obj) === 'object';\n};\n\nvar typeStr = function typeStr(obj) {\n  return type(obj) === 'string';\n};\n\nvar getCallBackObject = function getCallBackObject() {\n  glob[globalCbsName] = !typeObj(glob[globalCbsName]) ? {} : glob[globalCbsName];\n  return glob[globalCbsName];\n};\n\nvar placementNode = function placementNode(opts) {\n  if (opts.insertInto) {\n    return document.querySelector(opts.insertInto);\n  }\n\n  return opts.inBody ? document.body : document.head;\n};\n\nvar createScript = function createScript(opts) {\n  var script = document.createElement('script');\n\n  if (opts.attrs && typeObj(opts.attrs)) {\n    for (var _i = 0, _Object$keys = Object.keys(opts.attrs); _i < _Object$keys.length; _i++) {\n      var attr = _Object$keys[_i];\n      script.setAttribute(attr, opts.attrs[attr]);\n    }\n  }\n\n  return script;\n};\n\nvar loadCallBack = function loadCallBack(opts) {\n  if (opts.callBack && type(opts.callBack) === 'function') {\n    opts.callBack();\n  }\n};\n\nvar loadRemoveScript = function loadRemoveScript(removeScript, where, script) {\n  if (removeScript) {\n    where.removeChild(script);\n  }\n};\n\nvar prepareCallBack = function prepareCallBack(opts) {\n  var callBackName = opts.callBackName;\n  var url = opts.url;\n  return [url, callBackName ? glob : getCallBackObject(), callBackName || uid()];\n};\n\nvar getScriptDefaults = {\n  jsonp: false,\n  callBackParamName: 'callback',\n  removeScript: false,\n  callBackName: null\n};\n\nfunction getScript() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (arguments.length > 1) {\n    return Promise.all(Array.prototype.slice.call(arguments).map(getScript));\n  }\n\n  var optsTypeStr = typeStr(opts);\n  return new Promise(function (resolve, reject) {\n    if (!(typeObj(opts) && opts.url || optsTypeStr)) {\n      reject('Error: object with url or url string needed');\n      return;\n    }\n\n    if (optsTypeStr) {\n      opts = {\n        url: opts\n      };\n    }\n\n    opts = Object.assign({}, getScriptDefaults, opts);\n    var where = placementNode(opts);\n\n    if (!where) {\n      reject('Error: no DOM element to append script');\n      return;\n    }\n\n    var script = createScript(opts);\n    var removeScript = opts.removeScript;\n    var jsonp = opts.callBackName || opts.jsonp;\n\n    if (!jsonp) {\n      script.addEventListener('load', function () {\n        loadRemoveScript(removeScript, where, script);\n        loadCallBack(opts);\n        resolve(removeScript ? undefined : script);\n      });\n    } else {\n      var _prepareCallBack = prepareCallBack(opts),\n          _prepareCallBack2 = _slicedToArray(_prepareCallBack, 3),\n          url = _prepareCallBack2[0],\n          callBackObj = _prepareCallBack2[1],\n          callBackName = _prepareCallBack2[2];\n\n      opts.url = url;\n\n      callBackObj[callBackName] = function (res) {\n        delete callBackObj[callBackName];\n        loadRemoveScript(removeScript, where, script);\n        loadCallBack(opts);\n        resolve(res || removeScript ? undefined : script);\n      };\n    }\n\n    script.addEventListener('error', function () {\n      where.removeChild(script);\n      reject('Error: loading script');\n    });\n    script.src = opts.url;\n    where.appendChild(script);\n  });\n}\n\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://$/./node_modules/simple-load-script/es5/simpleLoadScript.js?");

/***/ }),

/***/ "./node_modules/vast-client/dist/vast-client.min.js":
/*!**********************************************************!*\
  !*** ./node_modules/vast-client/dist/vast-client.min.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("!function(e,t){ true?t(exports):undefined}(this,(function(e){\"use strict\";function t(e){return(t=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||\"object\"!=typeof t&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function p(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=u(e);if(t){var n=u(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return d(this,r)}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdId:{value:null,idRegistry:\"unknown\"},creativeExtensions:[]}}var v=[\"ADCATEGORIES\",\"ADCOUNT\",\"ADPLAYHEAD\",\"ADSERVINGID\",\"ADTYPE\",\"APIFRAMEWORKS\",\"APPBUNDLE\",\"ASSETURI\",\"BLOCKEDADCATEGORIES\",\"BREAKMAXADLENGTH\",\"BREAKMAXADS\",\"BREAKMAXDURATION\",\"BREAKMINADLENGTH\",\"BREAKMINDURATION\",\"BREAKPOSITION\",\"CLICKPOS\",\"CLICKTYPE\",\"CLIENTUA\",\"CONTENTID\",\"CONTENTPLAYHEAD\",\"CONTENTURI\",\"DEVICEIP\",\"DEVICEUA\",\"DOMAIN\",\"EXTENSIONS\",\"GDPRCONSENT\",\"IFA\",\"IFATYPE\",\"INVENTORYSTATE\",\"LATLONG\",\"LIMITADTRACKING\",\"MEDIAMIME\",\"MEDIAPLAYHEAD\",\"OMIDPARTNER\",\"PAGEURL\",\"PLACEMENTTYPE\",\"PLAYERCAPABILITIES\",\"PLAYERSIZE\",\"PLAYERSTATE\",\"PODSEQUENCE\",\"REGULATIONS\",\"SERVERSIDE\",\"SERVERUA\",\"TRANSACTIONID\",\"UNIVERSALADID\",\"VASTVERSIONS\",\"VERIFICATIONVENDORS\"];function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[],n=T(e);for(var a in!t.ERRORCODE||r.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=R(Math.round(1e8*Math.random()).toString()),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING,t)t[a]=k(t[a]);for(var o in n){var s=n[o];\"string\"==typeof s&&i.push(m(s,t))}return i}function m(e,t){var r=(e=g(e,t)).match(/[^[\\]]+(?=])/g);if(!r)return e;var i=r.filter((function(e){return v.indexOf(e)>-1}));return 0===i.length?e:g(e,i=i.reduce((function(e,t){return e[t]=-1,e}),{}))}function g(e,t){var r=e;for(var i in t){var n=t[i];r=r.replace(new RegExp(\"(?:\\\\[|%%)(\".concat(i,\")(?:\\\\]|%%)\"),\"g\"),n)}return r}function T(e){return Array.isArray(e)?e.map((function(e){return e&&e.hasOwnProperty(\"url\")?e.url:e})):e}function y(e,t){for(var r=0;r<t.length;r++)if(A(t[r],e))return!0;return!1}function A(e,t){if(e&&t){var r=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);return r.length===i.length&&(e.id===t.id&&e.url===t.url)}return!1}function k(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return\"%\".concat(e.charCodeAt(0).toString(16))}))}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=String(e);return r.length<t?E(0,t-r.length,!1).map((function(){return\"0\"})).join(\"\")+r:r}function E(e,t,r){for(var i=[],n=e<t,a=r?n?t+1:t-1:t,o=e;n?o<a:o>a;n?o++:o--)i.push(o);return i}var b={track:function(e,t,r){f(e,t,r).forEach((function(e){\"undefined\"!=typeof window&&null!==window&&((new Image).src=e)}))},resolveURLTemplates:f,extractURLsFromTemplates:T,containsTemplateObject:y,isTemplateObjectEqual:A,encodeURIComponentRFC3986:k,replaceUrlMacros:m,leftpad:R,range:E,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce((function(t,r){return t.concat(Array.isArray(r)?e(r):r)}),[])},joinArrayOfUniqueTemplateObjs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Array.isArray(e)?e:[],i=Array.isArray(t)?t:[],n=r.concat(i);return n.reduce((function(e,t){return y(t,e)||e.push(t),e}),[])}};function N(e){return-1!==[\"true\",\"TRUE\",\"True\",\"1\"].indexOf(e)}var L={childByName:function(e,t){var r=e.childNodes;for(var i in r){var n=r[i];if(n.nodeName===t)return n}},childrenByName:function(e,t){var r=[],i=e.childNodes;for(var n in i){var a=i[n];a.nodeName===t&&r.push(a)}return r},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf(\"//\")){var r=location.protocol;return\"\".concat(r).concat(e)}if(-1===e.indexOf(\"://\")){var i=t.slice(0,t.lastIndexOf(\"/\"));return\"\".concat(i,\"/\").concat(e)}return e},parseBoolean:N,parseNodeText:function(e){return e&&(e.textContent||e.text||\"\").trim()},copyNodeAttribute:function(e,t,r){var i=t.getAttribute(e);i&&r.setAttribute(e,i)},parseAttributes:function(e){for(var t=e.attributes,r={},i=0;i<t.length;i++)r[t[i].nodeName]=t[i].nodeValue;return r},parseDuration:function(e){if(null==e)return-1;if(b.isNumeric(e))return parseInt(e);var t=e.split(\":\");if(3!==t.length)return-1;var r=t[2].split(\".\"),i=parseInt(r[0]);2===r.length&&(i+=parseFloat(\"0.\".concat(r[1])));var n=parseInt(60*t[1]),a=parseInt(60*t[0]*60);return isNaN(a)||isNaN(n)||isNaN(i)||n>3600||i>60?-1:a+n+i},splitVAST:function(e){var t=[],r=null;return e.forEach((function(i,n){if(i.sequence&&(i.sequence=parseInt(i.sequence,10)),i.sequence>1){var a=e[n-1];if(a&&a.sequence===i.sequence-1)return void(r&&r.push(i));delete i.sequence}r=[i],t.push(r)})),t},assignAttributes:function(e,t){if(e)for(var r in e){var i=e[r];if(i.nodeName&&i.nodeValue&&t.hasOwnProperty(i.nodeName)){var n=i.nodeValue;\"boolean\"==typeof t[i.nodeName]&&(n=N(n)),t[i.nodeName]=n}}},mergeWrapperAdData:function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),e.followAdditionalWrappers=t.followAdditionalWrappers,e.allowMultipleAds=t.allowMultipleAds,e.fallbackOnNoAd=t.fallbackOnNoAd;var r=(t.creatives||[]).filter((function(e){return e&&\"companion\"===e.type})),i=r.reduce((function(e,t){return(t.variations||[]).forEach((function(t){(t.companionClickTrackingURLTemplates||[]).forEach((function(t){b.containsTemplateObject(t,e)||e.push(t)}))})),e}),[]);e.creatives=r.concat(e.creatives);var n=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,a=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;e.creatives.forEach((function(e){if(t.trackingEvents&&t.trackingEvents[e.type])for(var r in t.trackingEvents[e.type]){var o=t.trackingEvents[e.type][r];Array.isArray(e.trackingEvents[r])||(e.trackingEvents[r]=[]),e.trackingEvents[r]=e.trackingEvents[r].concat(o)}\"linear\"===e.type&&(n&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),a&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)),\"companion\"===e.type&&i.length&&(e.variations||[]).forEach((function(e){e.companionClickTrackingURLTemplates=b.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,i)}))})),t.adVerifications&&(e.adVerifications=e.adVerifications.concat(t.adVerifications)),t.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(t.blockedAdCategories))}};function w(e,t){var r=function(){var e=h(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,r=e.adId,i=e.sequence,n=e.apiFramework;return{id:t,adId:r,sequence:i,apiFramework:n,type:\"companion\",required:null,variations:[]}}(t);return r.required=e.getAttribute(\"required\")||null,r.variations=L.childrenByName(e,\"Companion\").map((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adType:\"companionAd\",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotID:e.adSlotID||null,pxratio:e.pxratio||\"1\",renderingMode:e.renderingMode||\"default\",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(L.parseAttributes(e));t.htmlResources=L.childrenByName(e,\"HTMLResource\").reduce((function(e,t){var r=L.parseNodeText(t);return r?e.concat(r):e}),[]),t.iframeResources=L.childrenByName(e,\"IFrameResource\").reduce((function(e,t){var r=L.parseNodeText(t);return r?e.concat(r):e}),[]),t.staticResources=L.childrenByName(e,\"StaticResource\").reduce((function(e,t){var r=L.parseNodeText(t);return r?e.concat({url:r,creativeType:t.getAttribute(\"creativeType\")||null}):e}),[]),t.altText=L.parseNodeText(L.childByName(e,\"AltText\"))||null;var r=L.childByName(e,\"TrackingEvents\");r&&L.childrenByName(r,\"Tracking\").forEach((function(e){var r=e.getAttribute(\"event\"),i=L.parseNodeText(e);r&&i&&(Array.isArray(t.trackingEvents[r])||(t.trackingEvents[r]=[]),t.trackingEvents[r].push(i))})),t.companionClickTrackingURLTemplates=L.childrenByName(e,\"CompanionClickTracking\").map((function(e){return{id:e.getAttribute(\"id\")||null,url:L.parseNodeText(e)}})),t.companionClickThroughURLTemplate=L.parseNodeText(L.childByName(e,\"CompanionClickThrough\"))||null;var i=L.childByName(e,\"AdParameters\");return i&&(t.adParameters=L.parseNodeText(i),t.xmlEncoded=i.getAttribute(\"xmlEncoded\")||null),t})),r}function U(e){return\"linear\"===e.type}function C(e,t){var r,i=function(){var e=h(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,r=e.adId,i=e.sequence,n=e.apiFramework;return{id:t,adId:r,sequence:i,apiFramework:n,type:\"linear\",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t);i.duration=L.parseDuration(L.parseNodeText(L.childByName(e,\"Duration\")));var n=e.getAttribute(\"skipoffset\");if(null==n)i.skipDelay=null;else if(\"%\"===n.charAt(n.length-1)&&-1!==i.duration){var a=parseInt(n,10);i.skipDelay=i.duration*(a/100)}else i.skipDelay=L.parseDuration(n);var o=L.childByName(e,\"VideoClicks\");if(o){var s=L.childByName(o,\"ClickThrough\");i.videoClickThroughURLTemplate=s?{id:s.getAttribute(\"id\")||null,url:L.parseNodeText(s)}:null,L.childrenByName(o,\"ClickTracking\").forEach((function(e){i.videoClickTrackingURLTemplates.push({id:e.getAttribute(\"id\")||null,url:L.parseNodeText(e)})})),L.childrenByName(o,\"CustomClick\").forEach((function(e){i.videoCustomClickURLTemplates.push({id:e.getAttribute(\"id\")||null,url:L.parseNodeText(e)})}))}var l=L.childByName(e,\"AdParameters\");l&&(i.adParameters=L.parseNodeText(l)),L.childrenByName(e,\"TrackingEvents\").forEach((function(e){L.childrenByName(e,\"Tracking\").forEach((function(e){var t=e.getAttribute(\"event\"),n=L.parseNodeText(e);if(t&&n){if(\"progress\"===t){if(!(r=e.getAttribute(\"offset\")))return;t=\"%\"===r.charAt(r.length-1)?\"progress-\".concat(r):\"progress-\".concat(Math.round(L.parseDuration(r)))}Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(n)}}))})),L.childrenByName(e,\"MediaFiles\").forEach((function(e){L.childrenByName(e,\"MediaFile\").forEach((function(e){i.mediaFiles.push(function(e){var t={id:null,fileURL:null,fileSize:0,deliveryType:\"progressive\",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute(\"id\"),t.fileURL=L.parseNodeText(e),t.deliveryType=e.getAttribute(\"delivery\"),t.codec=e.getAttribute(\"codec\"),t.mimeType=e.getAttribute(\"type\"),t.mediaType=e.getAttribute(\"mediaType\")||\"2D\",t.apiFramework=e.getAttribute(\"apiFramework\"),t.fileSize=parseInt(e.getAttribute(\"fileSize\")||0),t.bitrate=parseInt(e.getAttribute(\"bitrate\")||0),t.minBitrate=parseInt(e.getAttribute(\"minBitrate\")||0),t.maxBitrate=parseInt(e.getAttribute(\"maxBitrate\")||0),t.width=parseInt(e.getAttribute(\"width\")||0),t.height=parseInt(e.getAttribute(\"height\")||0);var r=e.getAttribute(\"scalable\");r&&\"string\"==typeof r&&(t.scalable=L.parseBoolean(r));var i=e.getAttribute(\"maintainAspectRatio\");i&&\"string\"==typeof i&&(t.maintainAspectRatio=L.parseBoolean(i));return t}(e))}));var t=L.childByName(e,\"InteractiveCreativeFile\");t&&(i.interactiveCreativeFile=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,apiFramework:e.apiFramework||null,variableDuration:L.parseBoolean(e.variableDuration),fileURL:null}}(L.parseAttributes(e));return t.fileURL=L.parseNodeText(e),t}(t));var r=L.childByName(e,\"ClosedCaptionFiles\");r&&L.childrenByName(r,\"ClosedCaptionFile\").forEach((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,language:e.language||null,fileURL:null}}(L.parseAttributes(e));t.fileURL=L.parseNodeText(e),i.closedCaptionFiles.push(t)}));var n,a,o,s=L.childByName(e,\"Mezzanine\"),l=(n=s,a={},o=!1,[\"delivery\",\"type\",\"width\",\"height\"].forEach((function(e){n&&n.getAttribute(e)?a[e]=n.getAttribute(e):o=!0})),o?null:a);if(l){var u={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:\"2D\"};u.id=s.getAttribute(\"id\"),u.fileURL=L.parseNodeText(s),u.delivery=l.delivery,u.codec=s.getAttribute(\"codec\"),u.type=l.type,u.width=parseInt(l.width,10),u.height=parseInt(l.height,10),u.fileSize=parseInt(s.getAttribute(\"fileSize\"),10),u.mediaType=s.getAttribute(\"mediaType\")||\"2D\",i.mezzanine=u}}));var u=L.childByName(e,\"Icons\");return u&&L.childrenByName(u,\"Icon\").forEach((function(e){i.icons.push(function(e){var t={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:\"1\",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};t.program=e.getAttribute(\"program\"),t.height=parseInt(e.getAttribute(\"height\")||0),t.width=parseInt(e.getAttribute(\"width\")||0),t.xPosition=function(e){if(-1!==[\"left\",\"right\"].indexOf(e))return e;return parseInt(e||0)}(e.getAttribute(\"xPosition\")),t.yPosition=function(e){if(-1!==[\"top\",\"bottom\"].indexOf(e))return e;return parseInt(e||0)}(e.getAttribute(\"yPosition\")),t.apiFramework=e.getAttribute(\"apiFramework\"),t.pxratio=e.getAttribute(\"pxratio\")||\"1\",t.offset=L.parseDuration(e.getAttribute(\"offset\")),t.duration=L.parseDuration(e.getAttribute(\"duration\")),L.childrenByName(e,\"HTMLResource\").forEach((function(e){t.type=e.getAttribute(\"creativeType\")||\"text/html\",t.htmlResource=L.parseNodeText(e)})),L.childrenByName(e,\"IFrameResource\").forEach((function(e){t.type=e.getAttribute(\"creativeType\")||0,t.iframeResource=L.parseNodeText(e)})),L.childrenByName(e,\"StaticResource\").forEach((function(e){t.type=e.getAttribute(\"creativeType\")||0,t.staticResource=L.parseNodeText(e)}));var r=L.childByName(e,\"IconClicks\");r&&(t.iconClickThroughURLTemplate=L.parseNodeText(L.childByName(r,\"IconClickThrough\")),L.childrenByName(r,\"IconClickTracking\").forEach((function(e){t.iconClickTrackingURLTemplates.push({id:e.getAttribute(\"id\")||null,url:L.parseNodeText(e)})})));return t.iconViewTrackingURLTemplate=L.parseNodeText(L.childByName(e,\"IconViewTracking\")),t}(e))})),i}function I(e,t){var r=function(){var e=h(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,r=e.adId,i=e.sequence,n=e.apiFramework;return{id:t,adId:r,sequence:i,apiFramework:n,type:\"nonlinear\",variations:[],trackingEvents:{}}}(t);return L.childrenByName(e,\"TrackingEvents\").forEach((function(e){var t,i;L.childrenByName(e,\"Tracking\").forEach((function(e){t=e.getAttribute(\"event\"),i=L.parseNodeText(e),t&&i&&(Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(i))}))})),L.childrenByName(e,\"NonLinear\").forEach((function(e){var t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:\"static\",adType:\"nonLinearAd\",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};t.id=e.getAttribute(\"id\")||null,t.width=e.getAttribute(\"width\"),t.height=e.getAttribute(\"height\"),t.expandedWidth=e.getAttribute(\"expandedWidth\"),t.expandedHeight=e.getAttribute(\"expandedHeight\"),t.scalable=L.parseBoolean(e.getAttribute(\"scalable\")),t.maintainAspectRatio=L.parseBoolean(e.getAttribute(\"maintainAspectRatio\")),t.minSuggestedDuration=L.parseDuration(e.getAttribute(\"minSuggestedDuration\")),t.apiFramework=e.getAttribute(\"apiFramework\"),L.childrenByName(e,\"HTMLResource\").forEach((function(e){t.type=e.getAttribute(\"creativeType\")||\"text/html\",t.htmlResource=L.parseNodeText(e)})),L.childrenByName(e,\"IFrameResource\").forEach((function(e){t.type=e.getAttribute(\"creativeType\")||0,t.iframeResource=L.parseNodeText(e)})),L.childrenByName(e,\"StaticResource\").forEach((function(e){t.type=e.getAttribute(\"creativeType\")||0,t.staticResource=L.parseNodeText(e)}));var i=L.childByName(e,\"AdParameters\");i&&(t.adParameters=L.parseNodeText(i)),t.nonlinearClickThroughURLTemplate=L.parseNodeText(L.childByName(e,\"NonLinearClickThrough\")),L.childrenByName(e,\"NonLinearClickTracking\").forEach((function(e){t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute(\"id\")||null,url:L.parseNodeText(e)})})),r.variations.push(t)})),r}function x(e){var t=[];return e.forEach((function(e){var r=S(e);r&&t.push(r)})),t}function S(e){if(\"#comment\"===e.nodeName)return null;var t,r={name:null,value:null,attributes:{},children:[]},i=e.attributes,n=e.childNodes;if(r.name=e.nodeName,e.attributes)for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];o.nodeName&&o.nodeValue&&(r.attributes[o.nodeName]=o.nodeValue)}for(var s in n)if(n.hasOwnProperty(s)){var l=S(n[s]);l&&r.children.push(l)}if(0===r.children.length||1===r.children.length&&[\"#cdata-section\",\"#text\"].indexOf(r.children[0].name)>=0){var u=L.parseNodeText(e);\"\"!==u&&(r.value=u),r.children=[]}return null===(t=r).value&&0===Object.keys(t.attributes).length&&0===t.children.length?null:r}function O(e){var t=[];return e.forEach((function(e){var r,i,n={id:e.getAttribute(\"id\")||null,adId:D(e),sequence:e.getAttribute(\"sequence\")||null,apiFramework:e.getAttribute(\"apiFramework\")||null},a=L.childByName(e,\"UniversalAdId\");a&&(r={idRegistry:a.getAttribute(\"idRegistry\")||\"unknown\",value:L.parseNodeText(a)});var o=L.childByName(e,\"CreativeExtensions\");for(var s in o&&(i=x(L.childrenByName(o,\"CreativeExtension\"))),e.childNodes){var l=e.childNodes[s],u=void 0;switch(l.nodeName){case\"Linear\":u=C(l,n);break;case\"NonLinearAds\":u=I(l,n);break;case\"CompanionAds\":u=w(l,n)}u&&(r&&(u.universalAdId=r),i&&(u.creativeExtensions=i),t.push(u))}})),t}function D(e){return e.getAttribute(\"AdID\")||e.getAttribute(\"adID\")||e.getAttribute(\"adId\")||null}var V={Wrapper:{subElements:[\"VASTAdTagURI\",\"Impression\"]},BlockedAdCategories:{attributes:[\"authority\"]},InLine:{subElements:[\"AdSystem\",\"AdTitle\",\"Impression\",\"AdServingId\",\"Creatives\"]},Category:{attributes:[\"authority\"]},Pricing:{attributes:[\"model\",\"currency\"]},Verification:{oneOfinLineResources:[\"JavaScriptResource\",\"ExecutableResource\"],attributes:[\"vendor\"]},UniversalAdId:{attributes:[\"idRegistry\"]},JavaScriptResource:{attributes:[\"apiFramework\",\"browserOptional\"]},ExecutableResource:{attributes:[\"apiFramework\",\"type\"]},Tracking:{attributes:[\"event\"]},Creatives:{subElements:[\"Creative\"]},Creative:{subElements:[\"UniversalAdId\"]},Linear:{subElements:[\"MediaFiles\",\"Duration\"]},MediaFiles:{subElements:[\"MediaFile\"]},MediaFile:{attributes:[\"delivery\",\"type\",\"width\",\"height\"]},Mezzanine:{attributes:[\"delivery\",\"type\",\"width\",\"height\"]},NonLinear:{oneOfinLineResources:[\"StaticResource\",\"IFrameResource\",\"HTMLResource\"],attributes:[\"width\",\"height\"]},Companion:{oneOfinLineResources:[\"StaticResource\",\"IFrameResource\",\"HTMLResource\"],attributes:[\"width\",\"height\"]},StaticResource:{attributes:[\"creativeType\"]},Icons:{subElements:[\"Icon\"]},Icon:{oneOfinLineResources:[\"StaticResource\",\"IFrameResource\",\"HTMLResource\"]}};function P(e,t){if(V[e.nodeName]&&V[e.nodeName].attributes){var r=V[e.nodeName].attributes.filter((function(t){return!e.getAttribute(t)}));r.length>0&&M({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:r},t)}}function B(e,t,r){var i=V[e.nodeName],n=!r&&\"Wrapper\"!==e.nodeName;if(i&&!n){if(i.subElements){var a=i.subElements.filter((function(t){return!L.childByName(e,t)}));a.length>0&&M({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:a},t)}if(r&&i.oneOfinLineResources)i.oneOfinLineResources.some((function(t){return L.childByName(e,t)}))||M({name:e.nodeName,parentName:e.parentNode.nodeName,oneOfResources:i.oneOfinLineResources},t)}}function F(e){return e.children&&0!==e.children.length}function M(e,t){var r=e.name,i=e.parentName,n=e.attributes,a=e.subElements,o=e.oneOfResources,s=\"Element '\".concat(r,\"'\");t(\"VAST-warning\",{message:s+=n?\" missing required attribute(s) '\".concat(n.join(\", \"),\"' \"):a?\" missing required sub element(s) '\".concat(a.join(\", \"),\"' \"):o?\" must provide one of the following '\".concat(o.join(\", \"),\"' \"):\" is empty\",parentElement:i,specVersion:4.1})}var W={verifyRequiredValues:function e(t,r,i){if(t&&t.nodeName)if(\"InLine\"===t.nodeName&&(i=!0),P(t,r),F(t)){B(t,r,i);for(var n=0;n<t.children.length;n++)e(t.children[n],r,i)}else 0===L.parseNodeText(t).length&&M({name:t.nodeName,parentName:t.parentNode.nodeName},r)},hasSubElements:F,emitMissingValueWarning:M,verifyRequiredAttributes:P,verifyRequiredSubElements:B};function j(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.allowMultipleAds,n=r.followAdditionalWrappers,a=e.childNodes;for(var o in a){var s=a[o];if(-1!==[\"Wrapper\",\"InLine\"].indexOf(s.nodeName)&&(\"Wrapper\"!==s.nodeName||!1!==n)){if(L.copyNodeAttribute(\"id\",e,s),L.copyNodeAttribute(\"sequence\",e,s),L.copyNodeAttribute(\"adType\",e,s),\"Wrapper\"===s.nodeName)return{ad:_(s,t),type:\"WRAPPER\"};if(\"InLine\"===s.nodeName)return{ad:q(s,t,{allowMultipleAds:i}),type:\"INLINE\"}}}}function q(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.allowMultipleAds;return!1===i&&e.getAttribute(\"sequence\")?null:H(e,t)}function H(e,t){t&&W.verifyRequiredValues(e,t);var r=e.childNodes,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:{},system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(L.parseAttributes(e));for(var n in r){var a=r[n];switch(a.nodeName){case\"Error\":i.errorURLTemplates.push(L.parseNodeText(a));break;case\"Impression\":i.impressionURLTemplates.push({id:a.getAttribute(\"id\")||null,url:L.parseNodeText(a)});break;case\"Creatives\":i.creatives=O(L.childrenByName(a,\"Creative\"));break;case\"Extensions\":var o=L.childrenByName(a,\"Extension\");i.extensions=x(o),i.adVerifications.length||(i.adVerifications=z(o));break;case\"AdVerifications\":i.adVerifications=G(L.childrenByName(a,\"Verification\"));break;case\"AdSystem\":i.system={value:L.parseNodeText(a),version:a.getAttribute(\"version\")||null};break;case\"AdTitle\":i.title=L.parseNodeText(a);break;case\"AdServingId\":i.adServingId=L.parseNodeText(a);break;case\"Category\":i.categories.push({authority:a.getAttribute(\"authority\")||null,value:L.parseNodeText(a)});break;case\"Expires\":i.expires=parseInt(L.parseNodeText(a),10);break;case\"ViewableImpression\":i.viewableImpression=Y(a);break;case\"Description\":i.description=L.parseNodeText(a);break;case\"Advertiser\":i.advertiser={id:a.getAttribute(\"id\")||null,value:L.parseNodeText(a)};break;case\"Pricing\":i.pricing={value:L.parseNodeText(a),model:a.getAttribute(\"model\")||null,currency:a.getAttribute(\"currency\")||null};break;case\"Survey\":i.survey=L.parseNodeText(a);break;case\"BlockedAdCategories\":i.blockedAdCategories.push({authority:a.getAttribute(\"authority\")||null,value:L.parseNodeText(a)})}}return i}function _(e,t){var r=H(e,t),i=e.getAttribute(\"followAdditionalWrappers\"),n=e.getAttribute(\"allowMultipleAds\"),a=e.getAttribute(\"fallbackOnNoAd\");r.followAdditionalWrappers=!i||L.parseBoolean(i),r.allowMultipleAds=!!n&&L.parseBoolean(n),r.fallbackOnNoAd=a?L.parseBoolean(a):null;var o=L.childByName(e,\"VASTAdTagURI\");if(o?r.nextWrapperURL=L.parseNodeText(o):(o=L.childByName(e,\"VASTAdTagURL\"))&&(r.nextWrapperURL=L.parseNodeText(L.childByName(o,\"URL\"))),r.creatives.forEach((function(e){if(-1!==[\"linear\",\"nonlinear\"].indexOf(e.type)){if(e.trackingEvents){r.trackingEvents||(r.trackingEvents={}),r.trackingEvents[e.type]||(r.trackingEvents[e.type]={});var t=function(t){var i=e.trackingEvents[t];Array.isArray(r.trackingEvents[e.type][t])||(r.trackingEvents[e.type][t]=[]),i.forEach((function(i){r.trackingEvents[e.type][t].push(i)}))};for(var i in e.trackingEvents)t(i)}e.videoClickTrackingURLTemplates&&(Array.isArray(r.videoClickTrackingURLTemplates)||(r.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((function(e){r.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(r.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(Array.isArray(r.videoCustomClickURLTemplates)||(r.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((function(e){r.videoCustomClickURLTemplates.push(e)})))}})),r.nextWrapperURL)return r}function G(e){var t=[];return e.forEach((function(e){var r={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},i=e.childNodes;for(var n in L.assignAttributes(e.attributes,r),i){var a=i[n];switch(a.nodeName){case\"JavaScriptResource\":case\"ExecutableResource\":r.resource=L.parseNodeText(a),L.assignAttributes(a.attributes,r);break;case\"VerificationParameters\":r.parameters=L.parseNodeText(a)}}var o=L.childByName(e,\"TrackingEvents\");o&&L.childrenByName(o,\"Tracking\").forEach((function(e){var t=e.getAttribute(\"event\"),i=L.parseNodeText(e);t&&i&&(Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(i))})),t.push(r)})),t}function z(e){var t=null,r=[];return e.some((function(e){return t=L.childByName(e,\"AdVerifications\")})),t&&(r=G(L.childrenByName(t,\"Verification\"))),r}function Y(e){var t={};t.id=e.getAttribute(\"id\")||null;var r=e.childNodes;for(var i in r){var n=r[i],a=n.nodeName,o=L.parseNodeText(n);if((\"Viewable\"===a||\"NotViewable\"===a||\"ViewUndetermined\"===a)&&o){var s=a.toLowerCase();Array.isArray(t[s])||(t[s]=[]),t[s].push(o)}}return t}var X=function(){function e(){r(this,e),this._handlers=[]}return n(e,[{key:\"on\",value:function(e,r){if(\"function\"!=typeof r)throw new TypeError(\"The handler argument must be of type Function. Received type \".concat(t(r)));if(!e)throw new TypeError(\"The event argument must be of type String. Received type \".concat(t(e)));return this._handlers.push({event:e,handler:r}),this}},{key:\"once\",value:function(e,t){return this.on(e,function(e,t,r){var i={fired:!1,wrapFn:void 0};function n(){i.fired||(e.off(t,i.wrapFn),i.fired=!0,r.bind(e).apply(void 0,arguments))}return i.wrapFn=n,n}(this,e,t))}},{key:\"off\",value:function(e,t){return this._handlers=this._handlers.filter((function(r){return r.event!==e||r.handler!==t})),this}},{key:\"emit\",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var n=!1;return this._handlers.forEach((function(t){\"*\"===t.event&&(n=!0,t.handler.apply(t,[e].concat(r))),t.event===e&&(n=!0,t.handler.apply(t,r))})),n}},{key:\"removeAllListeners\",value:function(e){return e?(this._handlers=this._handlers.filter((function(t){return t.event!==e})),this):(this._handlers=[],this)}},{key:\"listenerCount\",value:function(e){return this._handlers.filter((function(t){return t.event===e})).length}},{key:\"listeners\",value:function(e){return this._handlers.reduce((function(t,r){return r.event===e&&t.push(r.handler),t}),[])}},{key:\"eventNames\",value:function(){return this._handlers.map((function(e){return e.event}))}}]),e}();var K={get:function(e,t,r){r(new Error(\"Please bundle the library for node to use the node urlHandler\"))}},Q=12e4;function J(){try{var e=new window.XMLHttpRequest;return\"withCredentials\"in e?e:null}catch(e){return null}}function Z(e,t,r){var i=r?408:e.status,n=r?\"XHRURLHandler: Request timed out after \".concat(e.timeout,\" ms (\").concat(i,\")\"):\"XHRURLHandler: \".concat(e.statusText,\" (\").concat(i,\")\");t(new Error(n),null,{statusCode:i})}var $={get:function(e,t,r){if(\"https:\"===window.location.protocol&&0===e.indexOf(\"http://\"))return r(new Error(\"XHRURLHandler: Cannot go from HTTPS to HTTP.\"));try{var i=J();i.open(\"GET\",e),i.timeout=t.timeout||Q,i.withCredentials=t.withCredentials||!1,i.overrideMimeType&&i.overrideMimeType(\"text/xml\"),i.onload=function(){return function(e,t){200===e.status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):Z(e,t,!1)}(i,r)},i.onerror=function(){return Z(i,r,!1)},i.onabort=function(){return Z(i,r,!1)},i.ontimeout=function(){return Z(i,r,!0)},i.send()}catch(e){r(new Error(\"XHRURLHandler: Unexpected error\"))}},supported:function(){return!!J()}};var ee={get:function(e,t,r){return r||(\"function\"==typeof t&&(r=t),t={}),\"undefined\"==typeof window||null===window?K.get(e,t,r):$.supported()?$.get(e,t,r):r(new Error(\"Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler\"))}};var te={ERRORCODE:900,extensions:[]},re=function(e){l(i,e);var t=p(i);function i(){var e;return r(this,i),(e=t.call(this)).remainingAds=[],e.parentURLs=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e.parsingOptions={},e}return n(i,[{key:\"addURLTemplateFilter\",value:function(e){\"function\"==typeof e&&this.URLTemplateFilters.push(e)}},{key:\"removeURLTemplateFilter\",value:function(){this.URLTemplateFilters.pop()}},{key:\"countURLTemplateFilters\",value:function(){return this.URLTemplateFilters.length}},{key:\"clearURLTemplateFilters\",value:function(){this.URLTemplateFilters=[]}},{key:\"trackVastError\",value:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];this.emit(\"VAST-error\",Object.assign.apply(Object,[{},te,t].concat(i))),b.track(e,t)}},{key:\"getErrorURLTemplates\",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:\"fetchVAST\",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(n,a){t.URLTemplateFilters.forEach((function(t){e=t(e)})),t.parentURLs.push(e);var o=Date.now();t.emit(\"VAST-resolving\",{url:e,previousUrl:i,wrapperDepth:r,maxWrapperDepth:t.maxWrapperDepth,timeout:t.fetchingOptions.timeout}),t.urlHandler.get(e,t.fetchingOptions,(function(s,l){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=Math.round(Date.now()-o),d=Object.assign({url:e,previousUrl:i,wrapperDepth:r,error:s,duration:c},u);t.emit(\"VAST-resolved\",d),s?a(s):n(l)}))}))}},{key:\"initParsingStatus\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||Q,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL=\"\",this.urlHandler=e.urlHandler||e.urlhandler||ee,this.vastVersion=null}},{key:\"getRemainingAds\",value:function(e){var t=this;if(0===this.remainingAds.length)return Promise.reject(new Error(\"No more ads are available for the given VAST\"));var r=e?b.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(r,{wrapperDepth:0,url:this.rootURL}).then((function(e){return t.buildVASTResponse(e)}))}},{key:\"getAndParseVAST\",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(r),this.URLTemplateFilters.forEach((function(t){e=t(e)})),this.rootURL=e,this.fetchVAST(e).then((function(i){return r.previousUrl=e,r.isRootVAST=!0,r.url=e,t.parse(i,r).then((function(e){return t.buildVASTResponse(e)}))}))}},{key:\"parseVAST\",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(r),r.isRootVAST=!0,this.parse(e,r).then((function(e){return t.buildVASTResponse(e)}))}},{key:\"buildVASTResponse\",value:function(e){var t,r={ads:(t={ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:t.errorURLTemplates||[],version:t.version||null};return this.completeWrapperResolving(r),r}},{key:\"parseVastXml\",value:function(e,t){var r=t.isRootVAST,i=void 0!==r&&r,n=t.url,a=void 0===n?null:n,o=t.wrapperDepth,s=void 0===o?0:o,l=t.allowMultipleAds,u=t.followAdditionalWrappers;if(!e||!e.documentElement||\"VAST\"!==e.documentElement.nodeName)throw this.emit(\"VAST-ad-parsed\",{type:\"ERROR\",url:a,wrapperDepth:s}),new Error(\"Invalid VAST XMLDocument\");var c=[],d=e.documentElement.childNodes,p=e.documentElement.getAttribute(\"version\");for(var h in i&&p&&(this.vastVersion=p),d){var v=d[h];if(\"Error\"===v.nodeName){var f=L.parseNodeText(v);i?this.rootErrorURLTemplates.push(f):this.errorURLTemplates.push(f)}else if(\"Ad\"===v.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)l=!0;else if(!1===l&&c.length>1)break;var m=j(v,this.emit.bind(this),{allowMultipleAds:l,followAdditionalWrappers:u});m.ad?(c.push(m.ad),this.emit(\"VAST-ad-parsed\",{type:m.type,url:a,wrapperDepth:s,adIndex:c.length-1,vastVersion:p})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return c}},{key:\"parse\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.url,i=void 0===r?null:r,n=t.resolveAll,a=void 0===n||n,o=t.wrapperSequence,s=void 0===o?null:o,l=t.previousUrl,u=void 0===l?null:l,c=t.wrapperDepth,d=void 0===c?0:c,p=t.isRootVAST,h=void 0!==p&&p,v=t.followAdditionalWrappers,f=t.allowMultipleAds,m=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&h&&(f=!0);try{m=this.parseVastXml(e,{isRootVAST:h,url:i,wrapperDepth:d,allowMultipleAds:f,followAdditionalWrappers:v})}catch(e){return Promise.reject(e)}return 1===m.length&&null!=s&&(m[0].sequence=s),!1===a&&(this.remainingAds=L.splitVAST(m),m=this.remainingAds.shift()),this.resolveAds(m,{wrapperDepth:d,previousUrl:u,url:i})}},{key:\"resolveAds\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,i=r.wrapperDepth,n=r.previousUrl,a=r.url,o=[];return n=a,t.forEach((function(t){var r=e.resolveWrappers(t,i,n);o.push(r)})),Promise.all(o).then((function(t){var r=b.flatten(t);if(!r&&e.remainingAds.length>0){var o=e.remainingAds.shift();return e.resolveAds(o,{wrapperDepth:i,previousUrl:n,url:a})}return r}))}},{key:\"resolveWrappers\",value:function(e,t,r){var i=this;return new Promise((function(n){var a;if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,n(e);if(t>=i.maxWrapperDepth||-1!==i.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,n(e);e.nextWrapperURL=L.resolveVastAdTagURI(e.nextWrapperURL,r),i.URLTemplateFilters.forEach((function(t){e.nextWrapperURL=t(e.nextWrapperURL)}));var o=null!==(a=i.parsingOptions.allowMultipleAds)&&void 0!==a?a:e.allowMultipleAds,s=e.sequence;i.fetchVAST(e.nextWrapperURL,t,r).then((function(a){return i.parse(a,{url:e.nextWrapperURL,previousUrl:r,wrapperSequence:s,wrapperDepth:t,followAdditionalWrappers:e.followAdditionalWrappers,allowMultipleAds:o}).then((function(t){if(delete e.nextWrapperURL,0===t.length)return e.creatives=[],n(e);t.forEach((function(t){t&&L.mergeWrapperAdData(t,e)})),n(t)}))})).catch((function(t){e.errorCode=301,e.errorMessage=t.message,n(e)}))}))}},{key:\"completeWrapperResolving\",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;t>=0;t--){var r=e.ads[t];(r.errorCode||0===r.creatives.length)&&(this.trackVastError(r.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:r.errorCode||303},{ERRORMESSAGE:r.errorMessage||\"\"},{extensions:r.extensions},{system:r.system}),e.ads.splice(t,1))}}}]),i}(X),ie=null,ne={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},ae=function(){function e(){r(this,e),this.storage=this.initStorage()}return n(e,[{key:\"initStorage\",value:function(){if(ie)return ie;try{ie=\"undefined\"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){ie=null}return ie&&!this.isStorageDisabled(ie)||(ie=ne).clear(),ie}},{key:\"isStorageDisabled\",value:function(e){var t=\"__VASTStorage__\";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}},{key:\"getItem\",value:function(e){return this.storage.getItem(e)}},{key:\"setItem\",value:function(e,t){return this.storage.setItem(e,t)}},{key:\"removeItem\",value:function(e){return this.storage.removeItem(e)}},{key:\"clear\",value:function(){return this.storage.clear()}}]),e}(),oe=function(){function e(t,i,n){r(this,e),this.cappingFreeLunch=t||0,this.cappingMinimumTimeInterval=i||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new re,this.storage=n||new ae,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return n(e,[{key:\"getParser\",value:function(){return this.vastParser}},{key:\"hasRemainingAds\",value:function(){return this.vastParser.remainingAds.length>0}},{key:\"getNextAds\",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:\"get\",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Date.now();return(r=Object.assign({},this.defaultOptions,r)).hasOwnProperty(\"resolveAll\")||(r.resolveAll=!1),this.totalCallsTimeout<i?(this.totalCalls=1,this.totalCallsTimeout=i+36e5):this.totalCalls++,new Promise((function(n,a){if(t.cappingFreeLunch>=t.totalCalls)return a(new Error(\"VAST call canceled  FreeLunch capping not reached yet \".concat(t.totalCalls,\"/\").concat(t.cappingFreeLunch)));var o=i-t.lastSuccessfulAd;if(o<0)t.lastSuccessfulAd=0;else if(o<t.cappingMinimumTimeInterval)return a(new Error(\"VAST call canceled  (\".concat(t.cappingMinimumTimeInterval,\")ms minimum interval reached\")));t.vastParser.getAndParseVAST(e,r).then((function(e){return n(e)})).catch((function(e){return a(e)}))}))}},{key:\"lastSuccessfulAd\",get:function(){return this.storage.getItem(\"vast-client-last-successful-ad\")},set:function(e){this.storage.setItem(\"vast-client-last-successful-ad\",e)}},{key:\"totalCalls\",get:function(){return this.storage.getItem(\"vast-client-total-calls\")},set:function(e){this.storage.setItem(\"vast-client-total-calls\",e)}},{key:\"totalCallsTimeout\",get:function(){return this.storage.getItem(\"vast-client-total-calls-timeout\")},set:function(e){this.storage.setItem(\"vast-client-total-calls-timeout\",e)}}]),e}(),se=function(e){l(i,e);var t=p(i);function i(e,n,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var l in r(this,i),(o=t.call(this)).ad=n,o.creative=a,o.variation=s,o.muted=!1,o.impressed=!1,o.skippable=!1,o.trackingEvents={},o.lastPercentage=0,o._alreadyTriggeredQuartiles={},o.emitAlwaysEvents=[\"creativeView\",\"start\",\"firstQuartile\",\"midpoint\",\"thirdQuartile\",\"complete\",\"resume\",\"pause\",\"rewind\",\"skip\",\"closeLinear\",\"close\"],o.creative.trackingEvents){var u=o.creative.trackingEvents[l];o.trackingEvents[l]=u.slice(0)}return U(o.creative)?o._initLinearTracking():o._initVariationTracking(),e&&o.on(\"start\",(function(){e.lastSuccessfulAd=Date.now()})),o}return n(i,[{key:\"_initLinearTracking\",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:\"_initVariationTracking\",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e in this.variation.trackingEvents){var t=this.variation.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(t.slice(0)):this.trackingEvents[e]=t.slice(0)}\"nonLinearAd\"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):function(e){return\"companionAd\"===e.adType}(this.variation)&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:\"setDuration\",value:function(e){this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}}},{key:\"setProgress\",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.skipDelay||-1;if(-1===i||this.skippable||(i>e?this.emit(\"skip-countdown\",i-e):(this.skippable=!0,this.emit(\"skip-countdown\",0))),this.assetDuration>0){var n=Math.round(e/this.assetDuration*100),a=[];if(e>0){a.push(\"start\");for(var o=this.lastPercentage;o<n;o++)a.push(\"progress-\".concat(o+1,\"%\"));for(var s in a.push(\"progress-\".concat(Math.round(e))),this.quartiles)this.isQuartileReached(s,this.quartiles[s],e)&&(a.push(s),this._alreadyTriggeredQuartiles[s]=!0);this.lastPercentage=n}a.forEach((function(e){t.track(e,{macros:r,once:!0})})),e<this.progress&&this.track(\"rewind\",{macros:r})}this.progress=e}},{key:\"isQuartileReached\",value:function(e,t,r){var i=!1;return t<=r&&!this._alreadyTriggeredQuartiles[e]&&(i=!0),i}},{key:\"setMuted\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.muted!==e&&this.track(e?\"mute\":\"unmute\",{macros:t}),this.muted=e}},{key:\"setPaused\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.paused!==e&&this.track(e?\"pause\":\"resume\",{macros:t}),this.paused=e}},{key:\"setFullscreen\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fullscreen!==e&&this.track(e?\"fullscreen\":\"exitFullscreen\",{macros:t}),this.fullscreen=e}},{key:\"setExpand\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.expanded!==e&&(this.track(e?\"expand\":\"collapse\",{macros:t}),this.track(e?\"playerExpand\":\"playerCollapse\",{macros:t})),this.expanded=e}},{key:\"setSkipDelay\",value:function(e){\"number\"==typeof e&&(this.skipDelay=e)}},{key:\"trackImpression\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,e),this.track(\"creativeView\",{macros:e}))}},{key:\"error\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.trackURLs(this.ad.errorURLTemplates,e,{isCustomCode:t})}},{key:\"errorWithCode\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.error({ERRORCODE:e},t),console.log(\"The method errorWithCode is deprecated, please use vast tracker error method instead\")}},{key:\"complete\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(\"complete\",{macros:e})}},{key:\"notUsed\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(\"notUsed\",{macros:e}),this.trackingEvents=[]}},{key:\"otherAdInteraction\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(\"otherAdInteraction\",{macros:e})}},{key:\"acceptInvitation\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(\"acceptInvitation\",{macros:e})}},{key:\"adExpand\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(\"adExpand\",{macros:e})}},{key:\"adCollapse\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(\"adCollapse\",{macros:e})}},{key:\"minimize\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(\"minimize\",{macros:e})}},{key:\"verificationNotExecuted\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error(\"No adVerifications provided\");if(!e)throw new Error(\"No vendor provided, unable to find associated verificationNotExecuted\");var r=this.ad.adVerifications.find((function(t){return t.vendor===e}));if(!r)throw new Error(\"No associated verification element found for vendor: \".concat(e));var i=r.trackingEvents;if(i&&i.verificationNotExecuted){var n=i.verificationNotExecuted;this.trackURLs(n,t),this.emit(\"verificationNotExecuted\",{trackingURLTemplates:n})}}},{key:\"overlayViewDuration\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.ADPLAYHEAD=e,this.track(\"overlayViewDuration\",{macros:t})}},{key:\"close\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(this.linear?\"closeLinear\":\"close\",{macros:e})}},{key:\"skip\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(\"skip\",{macros:e})}},{key:\"load\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(\"loaded\",{macros:e})}},{key:\"click\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,t);var r=this.clickThroughURLTemplate||e,i=s({},t);if(r){this.progress&&(i.ADPLAYHEAD=this.progressFormatted());var n=b.resolveURLTemplates([r],i)[0];this.emit(\"clickthrough\",n)}}},{key:\"track\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.macros,i=void 0===r?{}:r,n=t.once,a=void 0!==n&&n;\"closeLinear\"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e=\"close\");var o=this.trackingEvents[e],s=this.emitAlwaysEvents.indexOf(e)>-1;o?(this.emit(e,{trackingURLTemplates:o}),this.trackURLs(o,i)):s&&this.emit(e,null),a&&(delete this.trackingEvents[e],s&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1))}},{key:\"trackURLs\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=s({},t);this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(i.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(i.ADPLAYHEAD=this.progressFormatted())),this.creative&&this.creative.universalAdId&&this.creative.universalAdId.idRegistry&&this.creative.universalAdId.value&&(i.UNIVERSALADID=\"\".concat(this.creative.universalAdId.idRegistry,\" \").concat(this.creative.universalAdId.value)),this.ad&&(this.ad.sequence&&(i.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(i.ADTYPE=this.ad.adType),this.ad.adServingId&&(i.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(i.ADCATEGORIES=this.ad.categories.map((function(e){return e.value})).join(\",\")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(i.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),b.track(e,i,r)}},{key:\"convertToTimecode\",value:function(e){var t=1e3*e,r=Math.floor(t/36e5),i=Math.floor(t/6e4%60),n=Math.floor(t/1e3%60),a=Math.floor(t%1e3);return\"\".concat(b.leftpad(r,2),\":\").concat(b.leftpad(i,2),\":\").concat(b.leftpad(n,2),\".\").concat(b.leftpad(a,3))}},{key:\"progressFormatted\",value:function(){return this.convertToTimecode(this.progress)}}]),i}(X);e.VASTClient=oe,e.VASTParser=re,e.VASTTracker=se,Object.defineProperty(e,\"__esModule\",{value:!0})}));\n\n\n//# sourceURL=webpack://$/./node_modules/vast-client/dist/vast-client.min.js?");

/***/ }),

/***/ "./node_modules/vast-client/src/urlhandlers/consts.js":
/*!************************************************************!*\
  !*** ./node_modules/vast-client/src/urlhandlers/consts.js ***!
  \************************************************************/
/*! exports provided: DEFAULT_TIMEOUT */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DEFAULT_TIMEOUT\", function() { return DEFAULT_TIMEOUT; });\nconst DEFAULT_TIMEOUT = 120000;\n\n\n//# sourceURL=webpack://$/./node_modules/vast-client/src/urlhandlers/consts.js?");

/***/ }),

/***/ "./node_modules/vast-client/src/urlhandlers/mock_node_url_handler.js":
/*!***************************************************************************!*\
  !*** ./node_modules/vast-client/src/urlhandlers/mock_node_url_handler.js ***!
  \***************************************************************************/
/*! exports provided: nodeURLHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"nodeURLHandler\", function() { return nodeURLHandler; });\n// This mock module is loaded in stead of the original NodeURLHandler module\n// when bundling the library for environments which are not node.\n// This allows us to avoid bundling useless node components and have a smaller build.\nfunction get(url, options, cb) {\n  cb(\n    new Error('Please bundle the library for node to use the node urlHandler')\n  );\n}\n\nconst nodeURLHandler = {\n  get\n};\n\n\n//# sourceURL=webpack://$/./node_modules/vast-client/src/urlhandlers/mock_node_url_handler.js?");

/***/ }),

/***/ "./node_modules/vast-client/src/urlhandlers/xhr_url_handler.js":
/*!*********************************************************************!*\
  !*** ./node_modules/vast-client/src/urlhandlers/xhr_url_handler.js ***!
  \*********************************************************************/
/*! exports provided: XHRURLHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"XHRURLHandler\", function() { return XHRURLHandler; });\n/* harmony import */ var _consts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./consts */ \"./node_modules/vast-client/src/urlhandlers/consts.js\");\n\n\nfunction xhr() {\n  try {\n    const request = new window.XMLHttpRequest();\n    if ('withCredentials' in request) {\n      // check CORS support\n      return request;\n    }\n    return null;\n  } catch (err) {\n    return null;\n  }\n}\n\nfunction supported() {\n  return !!xhr();\n}\n\nfunction handleLoad(request, cb) {\n  if (request.status === 200) {\n    cb(null, request.responseXML, {\n      byteLength: request.response.length,\n      statusCode: request.status\n    });\n  } else {\n    handleFail(request, cb, false);\n  }\n}\n\nfunction handleFail(request, cb, isTimeout) {\n  const statusCode = !isTimeout ? request.status : 408; // Request timeout\n  const msg = isTimeout\n    ? `XHRURLHandler: Request timed out after ${\n        request.timeout\n      } ms (${statusCode})`\n    : `XHRURLHandler: ${request.statusText} (${statusCode})`;\n\n  cb(new Error(msg), null, { statusCode });\n}\n\nfunction get(url, options, cb) {\n  if (window.location.protocol === 'https:' && url.indexOf('http://') === 0) {\n    return cb(new Error('XHRURLHandler: Cannot go from HTTPS to HTTP.'));\n  }\n\n  try {\n    const request = xhr();\n\n    request.open('GET', url);\n    request.timeout = options.timeout || _consts__WEBPACK_IMPORTED_MODULE_0__[\"DEFAULT_TIMEOUT\"];\n    request.withCredentials = options.withCredentials || false;\n    request.overrideMimeType && request.overrideMimeType('text/xml');\n\n    request.onload = () => handleLoad(request, cb);\n    request.onerror = () => handleFail(request, cb, false);\n    request.onabort = () => handleFail(request, cb, false);\n    request.ontimeout = () => handleFail(request, cb, true);\n\n    request.send();\n  } catch (error) {\n    cb(new Error('XHRURLHandler: Unexpected error'));\n  }\n}\n\nconst XHRURLHandler = {\n  get,\n  supported\n};\n\n\n//# sourceURL=webpack://$/./node_modules/vast-client/src/urlhandlers/xhr_url_handler.js?");

/***/ }),

/***/ "./node_modules/withinviewport/withinviewport.js":
/*!*******************************************************!*\
  !*** ./node_modules/withinviewport/withinviewport.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n * Within Viewport\n *\n * @description Determines whether an element is completely within the browser viewport\n * @author      Craig Patik, http://patik.com/\n * @version     2.1.2\n * @date        2019-08-16\n */\n(function (root, name, factory) {\n    // AMD\n    if (true) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    }\n    // Node and CommonJS-like environments\n    else {}\n}(this, 'withinviewport', function () {\n    var canUseWindowDimensions = typeof window !== 'undefined' && window.innerHeight !== undefined; // IE 8 and lower fail this\n\n    /**\n     * Determines whether an element is within the viewport\n     * @param  {Object}  elem       DOM Element (required)\n     * @param  {Object}  options    Optional settings\n     * @return {Boolean}            Whether the element was completely within the viewport\n     */\n    var withinviewport = function withinviewport(elem, options) {\n        var result = false;\n        var metadata = {};\n        var config = {};\n        var settings;\n        var isWithin;\n        var isContainerTheWindow;\n        var elemBoundingRect;\n        var containerBoundingRect;\n        var containerScrollTop;\n        var containerScrollLeft;\n        var scrollBarWidths = [0, 0];\n        var sideNamesPattern;\n        var sides;\n        var side;\n        var i;\n\n        // If invoked by the jQuery plugin, get the actual DOM element\n        if (typeof jQuery !== 'undefined' && elem instanceof jQuery) {\n            elem = elem.get(0);\n        }\n\n        if (typeof elem !== 'object' || elem.nodeType !== 1) {\n            throw new Error('First argument must be an element');\n        }\n\n        // Look for inline settings on the element\n        if (elem.getAttribute('data-withinviewport-settings') && window.JSON) {\n            metadata = JSON.parse(elem.getAttribute('data-withinviewport-settings'));\n        }\n\n        // Settings argument may be a simple string (`top`, `right`, etc)\n        if (typeof options === 'string') {\n            settings = {\n                sides: options\n            };\n        } else {\n            settings = options || {};\n        }\n\n        // Build configuration from defaults and user-provided settings and metadata\n        config.container = settings.container || metadata.container || withinviewport.defaults.container || window;\n        config.sides = settings.sides || metadata.sides || withinviewport.defaults.sides || 'all';\n        config.top = settings.top || metadata.top || withinviewport.defaults.top || 0;\n        config.right = settings.right || metadata.right || withinviewport.defaults.right || 0;\n        config.bottom = settings.bottom || metadata.bottom || withinviewport.defaults.bottom || 0;\n        config.left = settings.left || metadata.left || withinviewport.defaults.left || 0;\n\n        // Extract the DOM node from a jQuery collection\n        if (typeof jQuery !== 'undefined' && config.container instanceof jQuery) {\n            config.container = config.container.get(0);\n        }\n\n        // Use the window as the container if the user specified the body or a non-element\n        if (config.container === document.body || config.container.nodeType !== 1) {\n            config.container = window;\n        }\n\n        isContainerTheWindow = (config.container === window);\n\n        // Element testing methods\n        isWithin = {\n            // Element is below the top edge of the viewport\n            top: function _isWithin_top() {\n                if (isContainerTheWindow) {\n                    return (elemBoundingRect.top >= config.top);\n                } else {\n                    return (elemBoundingRect.top >= containerScrollTop - (containerScrollTop - containerBoundingRect.top) + config.top);\n                }\n            },\n\n            // Element is to the left of the right edge of the viewport\n            right: function _isWithin_right() {\n                // Note that `elemBoundingRect.right` is the distance from the *left* of the viewport to the element's far right edge\n\n                if (isContainerTheWindow) {\n                    return (elemBoundingRect.right <= (containerBoundingRect.right + containerScrollLeft) - config.right);\n                } else {\n                    return (elemBoundingRect.right <= containerBoundingRect.right - scrollBarWidths[0] - config.right);\n                }\n            },\n\n            // Element is above the bottom edge of the viewport\n            bottom: function _isWithin_bottom() {\n                var containerHeight = 0;\n\n                if (isContainerTheWindow) {\n                    if (canUseWindowDimensions) {\n                        containerHeight = config.container.innerHeight;\n                    } else if (document && document.documentElement) {\n                        containerHeight = document.documentElement.clientHeight;\n                    }\n                } else {\n                    containerHeight = containerBoundingRect.bottom;\n                }\n\n                // Note that `elemBoundingRect.bottom` is the distance from the *top* of the viewport to the element's bottom edge\n                return (elemBoundingRect.bottom <= containerHeight - scrollBarWidths[1] - config.bottom);\n            },\n\n            // Element is to the right of the left edge of the viewport\n            left: function _isWithin_left() {\n                if (isContainerTheWindow) {\n                    return (elemBoundingRect.left >= config.left);\n                } else {\n                    return (elemBoundingRect.left >= containerScrollLeft - (containerScrollLeft - containerBoundingRect.left) + config.left);\n                }\n            },\n\n            // Element is within all four boundaries\n            all: function _isWithin_all() {\n                // Test each boundary in order of efficiency and likeliness to be false. This way we can avoid running all four functions on most elements.\n                //     1. Top: Quickest to calculate + most likely to be false\n                //     2. Bottom: Note quite as quick to calculate, but also very likely to be false\n                //     3-4. Left and right are both equally unlikely to be false since most sites only scroll vertically, but left is faster to calculate\n                return (isWithin.top() && isWithin.bottom() && isWithin.left() && isWithin.right());\n            }\n        };\n\n        // Get the element's bounding rectangle with respect to the viewport\n        elemBoundingRect = elem.getBoundingClientRect();\n\n        // Get viewport dimensions and offsets\n        if (isContainerTheWindow) {\n            containerBoundingRect = document.documentElement.getBoundingClientRect();\n            containerScrollTop = document.body.scrollTop;\n            containerScrollLeft = window.scrollX || document.body.scrollLeft;\n        } else {\n            containerBoundingRect = config.container.getBoundingClientRect();\n            containerScrollTop = config.container.scrollTop;\n            containerScrollLeft = config.container.scrollLeft;\n        }\n\n        // Don't count the space consumed by scrollbars\n        if (containerScrollLeft) {\n            scrollBarWidths[0] = 18;\n        }\n\n        if (containerScrollTop) {\n            scrollBarWidths[1] = 16;\n        }\n\n        // Test the element against each side of the viewport that was requested\n        sideNamesPattern = /^top$|^right$|^bottom$|^left$|^all$/;\n\n        // Loop through all of the sides\n        sides = config.sides.split(' ');\n        i = sides.length;\n\n        while (i--) {\n            side = sides[i].toLowerCase();\n\n            if (sideNamesPattern.test(side)) {\n                if (isWithin[side]()) {\n                    result = true;\n                } else {\n                    result = false;\n\n                    // Quit as soon as the first failure is found\n                    break;\n                }\n            }\n        }\n\n        return result;\n    };\n\n    // Default settings\n    withinviewport.prototype.defaults = {\n        container: typeof document !== 'undefined' ? document.body : {},\n        sides: 'all',\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n    };\n\n    withinviewport.defaults = withinviewport.prototype.defaults;\n\n    /**\n     * Optional enhancements and shortcuts\n     *\n     * @description Uncomment or comment these pieces as they apply to your project and coding preferences\n     */\n\n    // Shortcut methods for each side of the viewport\n    // Example: `withinviewport.top(elem)` is the same as `withinviewport(elem, 'top')`\n    withinviewport.prototype.top = function _withinviewport_top(element) {\n        return withinviewport(element, 'top');\n    };\n\n    withinviewport.prototype.right = function _withinviewport_right(element) {\n        return withinviewport(element, 'right');\n    };\n\n    withinviewport.prototype.bottom = function _withinviewport_bottom(element) {\n        return withinviewport(element, 'bottom');\n    };\n\n    withinviewport.prototype.left = function _withinviewport_left(element) {\n        return withinviewport(element, 'left');\n    };\n\n    return withinviewport;\n}));\n\n\n//# sourceURL=webpack://$/./node_modules/withinviewport/withinviewport.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: MoovlahTracker, MoovlahPlayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _tracking__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tracking */ \"./src/tracking/index.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MoovlahTracker\", function() { return _tracking__WEBPACK_IMPORTED_MODULE_0__[\"default\"]; });\n\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./player */ \"./src/player/index.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MoovlahPlayer\", function() { return _player__WEBPACK_IMPORTED_MODULE_1__[\"default\"]; });\n\n\n\n\n\n//# sourceURL=webpack://$/./src/index.js?");

/***/ }),

/***/ "./src/player/index.js":
/*!*****************************!*\
  !*** ./src/player/index.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(process) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MoovlahPlayer; });\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! loglevel */ \"./node_modules/loglevel/lib/loglevel.js\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var simple_load_script__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! simple-load-script */ \"./node_modules/simple-load-script/es5/simpleLoadScript.js\");\n/* harmony import */ var simple_load_script__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(simple_load_script__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var vast_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! vast-client */ \"./node_modules/vast-client/dist/vast-client.min.js\");\n/* harmony import */ var vast_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(vast_client__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var vast_client_src_urlhandlers_mock_node_url_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! vast-client/src/urlhandlers/mock_node_url_handler */ \"./node_modules/vast-client/src/urlhandlers/mock_node_url_handler.js\");\n/* harmony import */ var vast_client_src_urlhandlers_xhr_url_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! vast-client/src/urlhandlers/xhr_url_handler */ \"./node_modules/vast-client/src/urlhandlers/xhr_url_handler.js\");\n/* harmony import */ var _tracking__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tracking */ \"./src/tracking/index.js\");\n/* harmony import */ var _util_strings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/strings */ \"./src/util/strings.js\");\n/* harmony import */ var _util_strings__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_util_strings__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _util_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../util/dom */ \"./src/util/dom.js\");\n/* harmony import */ var _util_dom__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_util_dom__WEBPACK_IMPORTED_MODULE_7__);\n\n // import { isVisible } from 'element-is-visible';\n\n\n\n\n // import MoovlahPlacement from '../moovlah-player/moovlah-placement';\n\n\n\n\nconst withinviewport = __webpack_require__(/*! withinviewport */ \"./node_modules/withinviewport/withinviewport.js\");\n\nclass MoovlahPlayer {\n  constructor(opts) {\n    this.logSettings = {\n      logLevel: `debug`\n    };\n\n    if (opts.logSettings && opts.logSettings.logLevel) {\n      this.logSettings.logLevel = opts.logSettings.logLevel;\n    }\n\n    this.inIFrame = window !== window.top;\n    this.embeddingPage = this.inIFrame ? window.referrer : window.document.location;\n    this.tracker = new _tracking__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n      trackers: {\n        gtag: ['G-JJLJFMKR04'],\n        google_analytics: ['UA-172822330-1', 'UA-172822330-2']\n      },\n      dimensions: {\n        placement_domain: window.top.location.host\n      },\n      loglevel: this.logSettings.logLevel\n    });\n    this.urlHandler = {};\n    this.intersectionSettings = {\n      threshold: [0, 0.5],\n      rootMargin: `0px 0px 0px 0px`\n    };\n    this.playerSettings = {\n      embedTag: null,\n      placement: ``,\n      configurationKey: ``,\n      stickinessDismissed: false,\n      firstVisible: false,\n      frameLoaded: false,\n      playerLoaded: false,\n      playerInstantiated: false,\n      componentReady: false,\n      inViewport: false\n    };\n    this.adsResponse = [];\n    this.pageState = {\n      tabFocus: true\n    };\n    this.playerState = {\n      inView: true\n    };\n    this.scriptTag = null;\n    this.intersectionObserver = null;\n    this.messageBus = null;\n    this.log = loglevel__WEBPACK_IMPORTED_MODULE_0___default.a;\n    this.playerStyles = {\n      responsiveContainerStyle: `position: relative;padding-bottom: 56.25%;height: 0;overflow: hidden;text-align:center;`,\n      hiddenContainerStyle: `position: relative;padding-bottom: 0%;height: 0;overflow: hidden;text-align:center;`,\n      responsiveFrameStyle: `position: absolute;top: 0;left: 0;width: 100%;height: 100%;`,\n      floatingFrameStyle: `z-index:10000; box-shadow: 0 3px 4px 0 rgba(0,0,0,0.14), 0 3px 3px -2px rgba(0,0,0,0.12), 0 1px 8px 0 rgba(0,0,0,0.20); position: fixed; right: 20px; bottom: 20px; top: auto; left: auto; max-width: 280px; max-height: 158px; width: 280px; height: 158px;`,\n      floatingFrameStyleBottomLeft: `left: 20px; right: auto; bottom: 20px; top: auto;`,\n      floatingFrameStyleBottomRight: `right: 20px; left: auto; bottom: 20px; top: auto;`,\n      floatingFrameStyleTopLeft: `left: 20px; right: auto; top: 20px; bottom: auto;`,\n      floatingFrameStyleTopRight: `right: 20px; left: auto; top: 20px; bottom: auto;`,\n      floatingFrameStyleMiddleLeft: `left: 20px; right: auto; bottom: 50%; top: auto;`,\n      floatingFrameStyleMiddleRight: `right: 20px; left: auto; bottom: 50%; top: auto;`,\n      placeholderImageStyle: `cursor:pointer`,\n      closeButton: `position: absolute; display: block; right: -12px; bottom: auto; top: -12px; left: auto; cursor: pointer; fill: rgba(0,0,0,1); height: 24px; width: 24px;`,\n      playButton: `position: absolute; width: 96px; height: 96px; left: 50%; top: 50%; margin-left: -48px; margin-top: -48px;`\n    };\n    this.pageProperties = {};\n\n    if (typeof document.hidden !== `undefined`) {\n      this.pageProperties.hidden = `hidden`;\n      this.pageProperties.visibilityChange = `visibilitychange`;\n    } else if (typeof document.mozHidden !== `undefined`) {\n      // Firefox up to v17\n      this.pageProperties.hidden = `mozHidden`;\n      this.pageProperties.visibilityChange = `mozvisibilitychange`;\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n      // Chrome up to v32, Android up to v4.4, Blackberry up to v10\n      this.pageProperties.hidden = `webkitHidden`;\n      this.pageProperties.visibilityChange = `webkitvisibilitychange`;\n    }\n\n    this.vastResponse = null;\n    this.playbackProperties = {\n      isPlaying: false,\n      isAdPlaying: false,\n      currentItem: null\n    };\n    this.allowableParams = [`anchorCorner`, `autoPlay`, `config`, `configurationKey`, `target`, `targetElement`, `clip`, `sticky`, `scrollToPlay`, `mute`, `playsInline`, `videoFormat`, `singlePlayer`, `shuffle`, `adTagOverride`, `searchContext`, `ignoreAdBlocker`, `deferToOVP`];\n\n    for (let section in opts) {\n      for (let setting in opts[section]) {\n        if (this[section].hasOwnProperty(setting)) {\n          this[section][setting] = opts[section][setting];\n        }\n      }\n    }\n\n    document.addEventListener(this.pageProperties.visibilityChange, this.handleVisibilityChange.bind(this), false);\n\n    if (window.addEventListener) {\n      window.addEventListener(`message`, this.handlePostMessage.bind(this), false);\n      /**\n      window.addEventListener('focus', this.handleFocusChange.bind(this), false);\n      window.addEventListener('blur', this.handleFocusChange.bind(this), false);\n      window.addEventListener('pageshow', this.handleFocusChange.bind(this), false);\n      window.addEventListener('pagehide', this.handleFocusChange.bind(this), false);\n      */\n    } else {\n      window.attachEvent(`onmessage`, this.handlePostMessage.bind(this), false);\n      /**\n      window.attachEvent('focus', this.handleFocusChange.bind(this), false);\n      window.attachEvent('blur', this.handleFocusChange.bind(this), false);\n      window.attachEvent('pageshow', this.handleFocusChange.bind(this), false);\n      window.attachEvent('pagehide', this.handleFocusChange.bind(this), false);\n      */\n    } // this.log.setDefaultLevel(\"trace\");\n\n\n    this.log.enableAll();\n    this.log.warn(`player logger at level`, this.log.getLevel(), this.logSettings.logLevel);\n\n    this.scriptTag = document.currentScript || function () {\n      const scripts = document.getElementsByTagName('script');\n      return scripts[scripts.length - 1];\n    }();\n\n    this.log.debug(`have scriptTag`, this.scriptTag);\n    this.bootstrapPlacement();\n  }\n\n  constructVASTTag(ad) {\n    //https://securepubads.g.doubleclick.net/gampad/ads?env=vp&gdfp_req=1&output=vast&iu=/1234/video-demo&sz=400x300&unviewed_position_start=1&ciu_szs=728x90,300x250\n    let tag = `https://securepubads.g.doubleclick.net/gampad/ads?iu=/${ad.network_id}/${ad.ad_unit_code}`;\n    tag += `&env=vp`;\n    tag += `&gdfp_req=1`;\n    tag += `&output=xml_vast4`;\n    tag += `&sz=640x480`;\n    tag += `&unviewed_position_start=1`;\n    tag += `&ltd=1`;\n    tag += `&cmsid=2564115&vid=${this.playerSettings.placement.playlist[0].id}`;\n    tag += `&correlator=` + Date.now();\n    tag += '&description_url=' + encodeURIComponent(this.embeddingPage);\n    tag += '&url=' + encodeURIComponent(this.embeddingPage);\n    tag += `&msid=&an=`;\n    tag += `&npa=1`;\n    tag += `&vpos=preroll`;\n    tag += `&wta=1`;\n    return tag;\n  }\n\n  async getAds() {\n    // console.info(`getAds`, this.playerSettings.placement);\n    this.urlHandler.get = this.getVastResponse.bind(this);\n    this.vastParser = new vast_client__WEBPACK_IMPORTED_MODULE_2__[\"VASTParser\"]();\n\n    if (this.playerSettings.placement.ads[0].ad_unit_id) {\n      console.info(`have ad id, constructing vast tag`, this.playerSettings.placement.ads[0]);\n      this.playerSettings.placement.ads[0].tag = this.constructVASTTag(this.playerSettings.placement.ads[0]);\n    } //this.playerSettings.placement.ads[0].tag += Date.now();\n\n\n    console.info(`parsing vast`, this.playerSettings.placement.ads[0].tag);\n\n    try {\n      const resp = await this.vastParser.getAndParseVAST(this.playerSettings.placement.ads[0].tag, {\n        urlHandler: this.urlHandler\n      });\n      this.adsResponse = resp.ads; // console.info(`got ads`, this.adsResponse);\n\n      return true;\n    } catch (e) {\n      // console.error(`error`, e);\n      return false;\n    }\n  }\n\n  getVastResponse(url, options, cb) {\n    console.info(`getVastResponse`); // Allow skip of the options param\n\n    if (!cb) {\n      if (typeof options === 'function') {\n        cb = options;\n      }\n\n      options = {};\n    }\n\n    if (typeof window === 'undefined' || window === null) {\n      return vast_client_src_urlhandlers_mock_node_url_handler__WEBPACK_IMPORTED_MODULE_3__[\"nodeURLHandler\"].get(url, options, (error, xml, details = {}) => {\n        // console.info(`in node here`, error, xml, details)\n        const s = new XMLSerializer();\n        this.vastResponse = s.serializeToString(xml); // console.info(`vr`, this.vastResponse)\n\n        return cb(error, xml, details);\n      });\n    } else if (vast_client_src_urlhandlers_xhr_url_handler__WEBPACK_IMPORTED_MODULE_4__[\"XHRURLHandler\"].supported()) {\n      return vast_client_src_urlhandlers_xhr_url_handler__WEBPACK_IMPORTED_MODULE_4__[\"XHRURLHandler\"].get(url, options, (error, xml, details = {}) => {\n        // console.info(`in xhr here`, error, xml, details)\n        // console.info(xml)\n        const s = new XMLSerializer();\n        this.vastResponse = s.serializeToString(xml); // console.info(`vr`, this.vastResponse)\n\n        return cb(error, xml, details);\n      });\n    }\n\n    return cb(new Error('Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler'));\n  }\n\n  handleVisibilityChange() {\n    this.log.debug(`handleVisibilityChange`);\n\n    if (document[this.pageProperties.hidden]) {\n      this.log.debug(`handleVisibilityChange hidden`);\n      this.frame && this.frame.contentWindow && this.frame.contentWindow.postMessage(JSON.stringify({\n        msg: `pause_video`\n      }), `*`);\n    } else {\n      this.log.debug(`handleVisibilityChange visible`);\n      this.frame && this.frame.contentWindow && this.frame.contentWindow.postMessage(JSON.stringify({\n        msg: `resume_video`\n      }), `*`);\n    }\n  }\n\n  async bootstrapPlacement() {\n    if (!window.google || !window.google.ima) {\n      try {\n        /* const scriptRef = */\n        const ima3 = await simple_load_script__WEBPACK_IMPORTED_MODULE_1___default()('//imasdk.googleapis.com/js/sdkloader/ima3.js');\n        console.warn(`ima loaded`, window.google);\n      } catch (err) {\n        console.error(`Error loading IMA SDK::` + err);\n        return;\n      }\n    } else {\n      console.warn(`ima pre-existing`, window.google.ima);\n    }\n\n    this.getConfiguration();\n    this.log.debug(`have config`, this.playerSettings.placement);\n    return this.initPlacement();\n  }\n\n  handleFocusChange(e) {\n    this.log.debug(`handleFocusChange`, e);\n\n    if ({\n      focus: 1,\n      pageshow: 1\n    }[e.type]) {\n      this.log.debug(`focused`, e.type);\n      if (this.playerState.inView) return;\n      this.pageState.tabFocus = true;\n      this.playerState.inView = true;\n      this.frame && this.frame.contentWindow && this.frame.contentWindow.postMessage(JSON.stringify({\n        msg: `resume_video`\n      }), `*`);\n    } else if (this.playerState.inView) {\n      this.log.debug(`focused`, e.type);\n      this.pageState.tabFocus = !this.tabFocus;\n      this.playerState.inView = false;\n      this.frame && this.frame.contentWindow && this.frame.contentWindow.postMessage(JSON.stringify({\n        msg: `pause_video`\n      }), `*`);\n    }\n  }\n\n  handlePostMessage(e) {\n    let msg;\n\n    try {\n      msg = JSON.parse(e.data);\n      this.log.info(`parent received message`, e.data);\n    } catch (err) {\n      // log.warn(`msg is not json`, err, e);\n      msg = {\n        msg: e.data\n      };\n    }\n\n    this.log.info(`after parse`, msg);\n\n    if (msg.msg === `player_ready`) {\n      this.log.info(`player is loaded`);\n      this.playerSettings.playerLoaded = true;\n    }\n  }\n\n  createPlayerElements() {\n    this.container = document.createElement(`div`);\n    this.container.setAttribute(`id`, `moovlah-player`);\n    this.frameHolder = document.createElement(`div`);\n    this.frameHolder.setAttribute(`class`, `moovlah-frameHolder`);\n    this.placeHolder = document.createElement(`div`);\n    this.placeHolder.setAttribute(`class`, `moovlah-placeHolder`);\n    this.frame = document.createElement(`iframe`);\n    this.playerComponent = document.createElement(`moovlah-placement`);\n    this.playBtn = document.createElement(`img`);\n    this.playBtn.setAttribute(`src`, `https://p.moovlah.io/img/play-btn.png`);\n    this.playBtn.setAttribute(`style`, this.playerStyles.playButton);\n    this.closeBtn = document.createElement(`img`);\n    this.closeBtn.setAttribute(`src`, `https://p.moovlah.io/img/close_gray.png`);\n    this.closeBtn.setAttribute(`style`, this.playerStyles.closeButton);\n\n    this.closeBtn.onclick = e => {\n      this.log.info(`onclick of button`, withinviewport(this.container));\n\n      if (!withinviewport(this.container)) {\n        this.log.info(`onclick of button not in viewport`);\n        this.frame && this.frame.contentWindow && this.frame.contentWindow.postMessage(JSON.stringify({\n          msg: `pause_video`\n        }), `*`);\n      }\n\n      if (this.playerSettings.placement.sticky) {\n        this.frameHolder.style = this.playerStyles.responsiveFrameStyle;\n        this.frameHolder.removeChild(this.closeBtn);\n        this.playerSettings.stickinessDismissed = true;\n      }\n    };\n  }\n\n  getConfiguration() {\n    this.log.debug(`getConfiguration`, this.playerSettings);\n\n    if (this.playerSettings.placement) {\n      this.log.debug(`getConfiguration have string placement`, this.playerSettings.placement);\n\n      try {\n        if (typeof this.playerSettings.placement === `string`) {\n          this.playerSettings.placementString = this.playerSettings.placement;\n          this.playerSettings.placement = JSON.parse(atob(this.playerSettings.placement));\n\n          if (this.playerSettings.placement.placement) {\n            this.playerSettings.placement = this.playerSettings.placement.placement;\n          }\n\n          this.playerSettings.configurationKey = this.playerSettings.placement.id;\n        }\n\n        this.tracker.updateDimensions({\n          placement_id: this.playerSettings.configurationKey\n        });\n        this.tracker.trackEvent({\n          eventCategory: 'Placement',\n          eventLabel: this.playerSettings.configurationKey,\n          eventAction: `code_executing`,\n          eventValue: performance.now()\n        });\n\n        if (this.playerSettings.placement.gaTrackingId) {\n          this.tracker.addTracker({\n            google_analytics: Array.isArray(this.playerSettings.placement.gaTrackingId) ? this.playerSettings.placement.gaTrackingId : [this.playerSettings.placement.gaTrackingId]\n          });\n        }\n\n        return true;\n      } catch (e) {\n        this.log.error(`Error parsing passed-in config`, e);\n        this.tracker.trackEvent({\n          eventCategory: 'Placement',\n          eventLabel: this.playerSettings.configurationKey,\n          eventAction: `configuration_parse_error`,\n          eventValue: e\n        });\n      }\n    } else {\n      const scriptAttrs = this.embedTag.dataset;\n\n      try {\n        this.playerSettings.configurationKey = scriptAttrs['configuration-key'];\n        return this.configurationFromKey();\n      } catch (e) {\n        this.log.error(`Error getting configKey`, e);\n        this.tracker.trackEvent({\n          eventCategory: 'Placement',\n          eventLabel: this.playerSettings.configurationKey,\n          eventAction: `configuration_load_error`,\n          eventValue: e\n        });\n      }\n    }\n  }\n\n  getOverrideParams() {\n    const scriptSrc = this.embedTag.getAtribute(`src`);\n    const scriptAttrs = this.embedTag.dataset;\n    this.log.debug(`have script src`, scriptSrc);\n    this.log.debug(`have script attrs`, scriptAttrs);\n    const scriptSrcUrl = new URL(scriptSrc);\n    this.log.debug(`have script src url`, scriptSrcUrl);\n    const scriptUrlParams = scriptSrcUrl.searchParams;\n\n    for (let p of this.allowableParams) {\n      if (scriptUrlParams[p]) {\n        this.log.debug(`overriding param from url`, p, scriptUrlParams[p]);\n        this.playerSettings.placement[p] = scriptUrlParams[p];\n      }\n\n      if (scriptAttrs[Object(_util_strings__WEBPACK_IMPORTED_MODULE_6__[\"camelize\"])(p)]) {\n        this.log.debug(`overriding param from tag`, Object(_util_strings__WEBPACK_IMPORTED_MODULE_6__[\"camelize\"])(p), scriptUrlParams[p]);\n        this.playerSettings.placement[Object(_util_strings__WEBPACK_IMPORTED_MODULE_6__[\"camelize\"])(p)] = scriptUrlParams[p];\n      }\n    }\n\n    this.log.debug(`overridden`, this.playerSettings.placement);\n    return;\n  }\n\n  detectCollisions() {\n    const foundEmbeds = document.querySelectorAll('iframe');\n    this.log.debug('foundAds', foundEmbeds);\n    const existingEmbeds = Array.from(foundEmbeds).filter(iframe => {\n      this.log.debug('foundEmbed', iframe);\n\n      if (iframe.getAttribute('src') && iframe.getAttribute('src').length > 0) {\n        return iframe.getAttribute('src').match(/^(?:https?:\\/\\/)?(?:[^.]+\\.)?(vimeo|youtube|jwplayer|brightcove|youtu)\\.(com|be)(\\/.*)?$/g);\n      }\n    });\n    return existingEmbeds;\n  }\n\n  paramsFromAttributes() {\n    const scriptAttrs = this.embedTag.dataset;\n    this.log.debug(`have script attrs`, scriptAttrs);\n\n    for (let p of scriptAttrs) {\n      if (tag.dataset[i]) {\n        //if(tag.hasAttribute(uncamelize(i))) {\n        loglevel__WEBPACK_IMPORTED_MODULE_0___default.a.info(`paramsFromTag::setting param`, i, tag.dataset[i]); //params[i] = tag.getAttribute(uncamelize(i));\n\n        params[i] = tag.dataset[i];\n      }\n    }\n\n    return;\n  }\n\n  async initPlacement() {\n    await this.getAds();\n    this.log.info(`have ads`, this.adsResponse, this.playerSettings.placement.showIfNoAds);\n\n    if (this.adsResponse.length === 0 && !this.playerSettings.placement.showIfNoAds) {\n      this.tracker.trackEvent({\n        eventCategory: 'Placement',\n        eventLabel: this.playerSettings.configurationKey,\n        eventAction: `load_aborted`,\n        eventValue: `no ads returned`\n      });\n      return;\n    }\n\n    this.createPlayerElements();\n    this.embedElement = this.playerSettings.placement.targetElement ? document.querySelector(this.playerSettings.placement.targetElement) : this.scriptTag.parentNode; // this.log.info(`embedElement`, this.playerSettings.placement.targetElement, this.embedElement, this.scriptTag, this.scriptTag.parentNode);\n\n    if (!this.embedElement) {\n      this.tracker.trackEvent({\n        eventCategory: 'Placement',\n        eventLabel: this.playerSettings.configurationKey,\n        eventAction: `load_aborted`,\n        eventValue: `embed element not in dom`\n      });\n      return;\n    }\n\n    this.playbackProperties.currentItem = this.playerSettings.placement.playlist[0];\n    this.placeholderImage = document.createElement('picture');\n    this.placeholderImage.setAttribute(`style`, this.playerStyles.placeholderImageStyle);\n    const szes = [1080, 720, 480, 360];\n    szes.map(sze => {\n      const src = document.createElement(`source`);\n      const sizedSrc = this.playbackProperties.currentItem[`poster_${sze}`];\n      this.log.debug(`sizedSrc`, sizedSrc);\n      src.setAttribute(`type`, `image/jpeg`);\n      src.setAttribute(`srcset`, sizedSrc);\n      src.setAttribute(`width`, `100%`);\n      this.placeholderImage.appendChild(src);\n    });\n    const img = document.createElement(`img`);\n    img.setAttribute(`src`, this.playbackProperties.currentItem.poster_480);\n    img.setAttribute(`alt`, this.playbackProperties.currentItem.name);\n    this.placeholderImage.appendChild(img);\n    this.placeHolder.appendChild(this.placeholderImage); // this.placeHolder.appendChild(this.playBtn);\n\n    this.container.setAttribute(`style`, this.playerStyles.hiddenContainerStyle); //this.container.appendChild(this.placeHolder);\n\n    this.embedElement.prepend(this.container);\n    /**\n    this.componentScript = document.createElement(`script`);\n    this.componentScript.setAttribute(`src`, `/js/moovlah-placement.min.js`);\n    this.componentScript.onLoad = (e) => {\n      this.log.info(`componentLoaded`, e);\n      this.playerSettings.componentReady = true;\n    }\n    this.embedElement.prepend(this.componentScript);\n    */\n\n    this.log.info(`player settings`, this.playerSettings);\n    this.setUpPlayer();\n    window.requestAnimationFrame(this.beginIntersectionObserver.bind(this));\n  }\n\n  placementFromConfigKey() {\n    this.log.info(`placementFromConfigKey`, this.playerSettings.configurationKey);\n  }\n\n  showPosterPlaceholder() {\n    this.log.info(`showPosterPlaceholder`, this.playerSettings.playlist);\n  }\n\n  onPlayerExitViewport() {\n    this.log.info(`onPlayerExitViewport`, this.playerSettings.placement.sticky, this.playerSettings.stickinessDismissed);\n    this.playerSettings.inViewport = false;\n\n    if (!this.playerSettings.placement.sticky || this.playerSettings.stickinessDismissed || !this.playerSettings.firstVisible) {\n      this.log.info(`not stick or dismissed`, this.playerSettings.placement.sticky, this.playerSettings.stickinessDismissed, this.playerSettings.firstVisible);\n      this.frame && this.frame.contentWindow && this.frame.contentWindow.postMessage(JSON.stringify({\n        msg: `player_exited_viewport`\n      }), `*`);\n      return;\n    }\n\n    this.log.info(`onPlayerExitViewport`);\n    const qStyle = this.playerSettings.placement.anchorCorner ? this.playerSettings.placement.anchorCorner.split(`-`).map(w => w[0].toUpperCase() + w.substr(1).toLowerCase()).join(``) : ``;\n    const quadrantStyle = `floatingFrameStyle${qStyle}`;\n    this.log.info(`quadrantStyle`, quadrantStyle);\n    const fStyle = `${this.playerStyles.floatingFrameStyle}${this.playerStyles[quadrantStyle]}`;\n    loglevel__WEBPACK_IMPORTED_MODULE_0___default.a.info(`fStyle`, fStyle);\n    this.frameHolder.appendChild(this.closeBtn);\n    this.frameHolder.setAttribute(`style`, fStyle); // this.container.appendChild(this.placeHolder);\n  }\n\n  onPlayerEnterViewport() {\n    this.log.info(`onPlayerEnterViewport`);\n    this.playerSettings.inViewport = true;\n    this.frame && this.frame.contentWindow && this.frame.contentWindow.postMessage(JSON.stringify({\n      msg: `player_entered_viewport`\n    }), `*`);\n\n    if (this.playerSettings.firstVisible) {\n      this.log.info(`onPlayerEnterViewport firstVisible`);\n      this.frameHolder.setAttribute(`style`, this.playerStyles.responsiveFrameStyle);\n\n      try {\n        this.frameHolder.removeChild(this.closeBtn);\n      } catch (e) {//Nothing just a race condition\n      } // this.container.removeChild(this.placeHolder);\n\n    }\n  }\n\n  constructIframeSrc(params) {\n    this.log.info(`constructIframeSrc`, params);\n    params.logLevel = `debug`;\n    const pars = Object(_util_strings__WEBPACK_IMPORTED_MODULE_6__[\"serializeParams\"])(params);\n    this.log.info(`constructIframeSrc::serialized`, pars);\n    return `${process.env.PLAYER_DOMAIN}/`; //return `${process.env.PLAYER_DOMAIN}/${this.playerSettings.configurationKey}?${pars}`;\n  }\n\n  onFrameLoaded() {\n    this.log.info(`onFrameLoaded`, this.playerSettings, this.embedElement, withinviewport(this.container));\n    /**\n    this.frameHolder.setAttribute(`style`, this.playerStyles.responsiveFrameStyle);\n    this.container.setAttribute(`style`, this.playerStyles.responsiveContainerStyle);\n    this.frame.setAttribute(`style`, `height:100%;width:100%;`);\n    */\n\n    this.playerSettings.frameLoaded = true;\n\n    if (withinviewport(this.container)) {\n      this.log.info(`player visible on load`);\n      this.playerSettings.firstVisible = true;\n      this.initPlayer();\n    }\n\n    this.tracker.trackEvent({\n      eventCategory: 'Placement',\n      eventLabel: this.playerStyles.configurationKey,\n      eventAction: `frame_loaded`,\n      eventValue: null\n    }); //this.container.removeChild(this.placeHolder);\n  }\n\n  initPlayer() {\n    this.log.info(`initPlayer`);\n    this.frame && this.frame.contentWindow && this.frame.contentWindow.postMessage(JSON.stringify({\n      msg: `configure_player`,\n      data: {\n        autoplay: this.playerSettings.placement.autoPlay,\n        ads: this.playerSettings.placement.ads,\n        mute: this.playerSettings.placement.mute,\n        playlist: this.playerSettings.placement.playlist,\n        adsResponse: this.vastResponse\n      }\n    }), `${process.env.PLAYER_DOMAIN}`);\n    Object(_util_dom__WEBPACK_IMPORTED_MODULE_7__[\"animateDivPadding\"])({\n      duration: 150,\n      newHeight: 56.25,\n      div: this.container\n    }).then(() => {\n      // console.info(`here`, this);\n      this.container.setAttribute(`style`, this.playerStyles.responsiveContainerStyle);\n      this.frame && this.frame.contentWindow && this.frame.contentWindow.postMessage(JSON.stringify({\n        msg: `play_video`\n      }), `*`); //this.frame.addEventListener('mouseover', alert('yo'), true);\n      //this.frame.addEventListener('mouseout', alert('oy'), true);\n    });\n    this.playerSettings.playerInstantiated = true;\n  }\n\n  setUpPlayer() {\n    this.log.info(`setUpPlayer`);\n    this.frame.setAttribute(`frameborder`, `0`);\n    this.frame.setAttribute(`referrer-policy`, `unsafe-url`);\n    this.frame.setAttribute(`allow`, `autoplay;fullscreen`);\n    this.frame.setAttribute(`style`, `height:0px;width:0px;height 0.75s ease-in;`);\n    this.log.info(`initMoovlah setting frame`, this.frame);\n    const frameSrc = this.constructIframeSrc({});\n    this.frame.setAttribute(`src`, frameSrc);\n    this.frame.onload = this.onFrameLoaded.bind(this);\n    const placementWidth = this.container.offsetWidth;\n    this.log.info(`width`, placementWidth, `height`, placementWidth * (9 / 16));\n    this.frame.setAttribute(`style`, `height:100%;width:100%;`);\n    this.frameHolder.setAttribute(`style`, this.playerStyles.responsiveFrameStyle);\n    this.playerComponent.setAttribute(`style`, `height:100%;width:100%`);\n    this.playerComponent.setAttribute(`configuration-key`, this.playerSettings.configurationKey);\n    this.frameHolder.appendChild(this.frame); // this.frameHolder.appendChild(this.playerComponent);\n\n    this.container.prepend(this.frameHolder);\n    return; // this.container.remove(this.placeHolder)\n  }\n\n  beginIntersectionObserver() {\n    this.log.info(`beginIntersectionObserver`);\n    this.intersectionObserver = new IntersectionObserver(entries => {\n      // If the browser is busy while scrolling happens, multiple entries can\n      // accumulate between invocations of this callback. As long as any one\n      // of the notifications reports the sentinel within the scrolling viewport,\n      // we add more content.\n      //this.log.info(`intersectionObserver`, entries);\n      entries.forEach(entry => {\n        //this.log.info(`intersectionObserver`, entry);\n        if (entry.intersectionRatio < 0.5) {\n          //this.log.info(`intersectionObserver not in viewport`, entry);\n          if (this.playerSettings.playerLoaded) {\n            this.onPlayerExitViewport();\n          }\n        } else {\n          this.log.info(`intersectionObserver in viewport`, this.playerSettings.firstVisible, this.frameLoaded, this.playerSettings.playerInstantiated);\n\n          if (!this.playerSettings.firstVisible && this.playerSettings.frameLoaded && !this.playerSettings.playerInstantiated) {\n            this.playerSettings.firstVisible = true;\n            this.initPlayer();\n          }\n\n          if (this.playerSettings.playerLoaded) {\n            this.onPlayerEnterViewport();\n          }\n        }\n      });\n    }, this.intersectionSettings);\n    this.intersectionObserver.observe(this.container);\n  }\n\n}\n;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://$/./src/player/index.js?");

/***/ }),

/***/ "./src/tracking/ga_loader.js":
/*!***********************************!*\
  !*** ./src/tracking/ga_loader.js ***!
  \***********************************/
/*! exports provided: UASnippet, GtagSnippet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UASnippet\", function() { return UASnippet; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GtagSnippet\", function() { return GtagSnippet; });\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! loglevel */ \"./node_modules/loglevel/lib/loglevel.js\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__);\n// Based on Google Analytics JavaScript Tracking Snippet\n// See original @ https://developers.google.com/analytics/devguides/collection/analyticsjs/tracking-snippet-reference\n\n/**\n * Creates a temporary global ga object and lazy loads analytics.js.\n * @function\n * @param {string} Global name of analytics object. Defaults to 'ga'.\n * @param {boolean} Set to true to load the debug version of the analytics.js library.\n * @param {boolean} Set to true to enable trace debugging.\n */\n\nloglevel__WEBPACK_IMPORTED_MODULE_0___default.a.setDefaultLevel('warn');\n\nconst UASnippet = function (name = 'ga', debug = false, trace = false) {\n  // Preserve renaming support and minification\n  return new Promise(function (resolve, reject) {\n    let win = window,\n        doc = document,\n        el = 'script'; // Acts as a pointer to support renaming\n\n    win.GoogleAnalyticsObject || (win.GoogleAnalyticsObject = name); // Ensure analytics.js is not already loaded\n\n    if (win[name] && typeof win[name] === 'function') {\n      resolve(win.GoogleAnalyticsObject);\n    }\n\n    if (trace) {\n      win['ga_debug'] = {\n        trace: true\n      };\n    } // Creates an initial ga() function\n    // The queued commands will be executed once analytics.js loads\n\n\n    win[name] = function () {\n      win[name].q.push(arguments);\n    };\n\n    win[name].q = []; // Sets the time (as an integer) this tag was executed\n    // Used for timing hits\n\n    win[name].l = 1 * new Date(); // Insert script element above the first script element in document\n    // (async + https)\n\n    let first = doc.getElementsByTagName(el)[0];\n    let script = doc.createElement(el);\n    script.src = 'https://www.google-analytics.com/analytics' + (debug ? '_debug.js' : '.js');\n    script.async = true; //if (typeof cb === 'function') script.onload = () => { onLoad(true); }\n\n    script.onload = resolve(win.GoogleAnalyticsObject);\n    script.onerror = reject('error loading GA');\n    first.parentNode.insertBefore(script, first);\n  });\n};\n\nconst GtagSnippet = function (MEASUREMENT_ID) {\n  // Preserve renaming support and minification\n  loglevel__WEBPACK_IMPORTED_MODULE_0___default.a.info(`GtagSnippet`, MEASUREMENT_ID);\n  MEASUREMENT_ID = Array.isArray(MEASUREMENT_ID) ? MEASUREMENT_ID : [MEASUREMENT_ID];\n  loglevel__WEBPACK_IMPORTED_MODULE_0___default.a.info(`GtagSnippet Array`, MEASUREMENT_ID);\n  return new Promise(function (resolve, reject) {\n    // Insert script element above the first script element in document\n    // (async + https)\n    let win = window,\n        doc = document,\n        el = 'script';\n    let first = doc.getElementsByTagName(el)[0];\n    let script = doc.createElement(el);\n    script.src = `https://www.googletagmanager.com/gtag/js?id=${MEASUREMENT_ID[0]}`;\n    script.async = true; //if (typeof cb === 'function') script.onload = () => { onLoad(true); }\n\n    script.onload = e => {\n      loglevel__WEBPACK_IMPORTED_MODULE_0___default.a.debug(`gTag onLoad`, e);\n      win.dataLayer = win.dataLayer || [];\n\n      function gtag() {\n        loglevel__WEBPACK_IMPORTED_MODULE_0___default.a.debug('gtag', arguments);\n        win.dataLayer.push(arguments);\n      }\n\n      gtag('js', new Date());\n      MEASUREMENT_ID.map(i => {\n        loglevel__WEBPACK_IMPORTED_MODULE_0___default.a.info(`configuring gtag id`, i);\n        gtag('config', i);\n      });\n      resolve(gtag);\n    };\n\n    script.onerror = err => {\n      console.error(err);\n      reject(err);\n    };\n\n    first.parentNode.insertBefore(script, first);\n  });\n};\n\n\n\n//# sourceURL=webpack://$/./src/tracking/ga_loader.js?");

/***/ }),

/***/ "./src/tracking/index.js":
/*!*******************************!*\
  !*** ./src/tracking/index.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MoovlahTracker; });\n/* harmony import */ var _ga_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ga_loader */ \"./src/tracking/ga_loader.js\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! loglevel */ \"./node_modules/loglevel/lib/loglevel.js\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass MoovlahTracker {\n  constructor(opts) {\n    this.loglevel = `warn`;\n\n    if (opts.loglevel) {\n      this.loglevel = opts.loglevel;\n    }\n\n    loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.setDefaultLevel(this.loglevel);\n    this.trackers = {\n      'google_analytics': {\n        ids: []\n      },\n      'gtag': {\n        ids: []\n      }\n    };\n    this.dimensionsMap = {\n      google_analytics: [``, //GOOGLE STARTS COUNTING AT 1\n      `player_id`, `content_id`, `floating`, `placement_id`, `distribution_id`, `user_id`, `player_type`, `mute`, `embedtype`, `universal_ad_id`, `play_id`, `content_name`, `universal_ad_id_registry`, `error_code`, `error_message`, `placement_domain`, `ad_network_id`, `ad_unit_id`, `ad_id`, `ad_query_id`],\n      gtag: {\n        player_id: null,\n        content_id: null,\n        content_name: null,\n        floating: null,\n        placement_id: null,\n        distribution_id: null,\n        user_id: null,\n        player_type: null,\n        embedtype: null,\n        mute: null,\n        universal_ad_id: null,\n        play_id: null,\n        universal_ad_id_registry: null,\n        error_code: null,\n        error_message: null,\n        placement_domain: null,\n        ad_network_id: null,\n        ad_unit_id: null,\n        ad_id: null,\n        ad_query_id: null\n      }\n    };\n    this.metricsMap = {\n      google_analytics: [`` //GOOGLE STARTS COUNTING AT 1\n      ]\n    };\n    this.variablesMap = {\n      google_analytics: [`` //GOOGLE STARTS COUNTING AT 1\n      ]\n    };\n    this.dimensions = opts.dimensions || {};\n    this.metrics = opts.metrics || {};\n    this.variables = opts.variables || {};\n    this.player = opts.player;\n    this.eventsQueue = [];\n    loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.debug('MoovlahTracker', opts, this.dimensions);\n\n    for (let tracker in opts.trackers) {\n      opts.trackers[tracker] = Array.isArray(opts.trackers[tracker]) ? opts.trackers[tracker] : [opts.trackers[tracker]];\n\n      if (this.trackers[tracker]) {\n        this.trackers[tracker].eventQueue = [];\n        opts.trackers[tracker].map(i => {\n          this.trackers[tracker].ids.push(i);\n        });\n      } else {\n        this.trackers[tracker] = {\n          ids: opts.trackers[tracker],\n          eventQueue: []\n        };\n      }\n    }\n\n    console.warn(`trackers`, this.trackers);\n\n    for (let tracker in this.trackers) {\n      if (!this.trackers[tracker] || !this.trackers[tracker].ids) {\n        loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('empty tracker so skipping', tracker);\n        continue;\n      }\n\n      if (this.trackers[tracker].ids.length === 0) {\n        loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('empty tracker array so skipping', tracker);\n        continue;\n      } else {\n        loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('have tracker ' + tracker, this.trackers[tracker].ids.length);\n      }\n\n      switch (tracker) {\n        case 'gtag':\n          loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('gtag', this.trackers[tracker].ids);\n          Object(_ga_loader__WEBPACK_IMPORTED_MODULE_0__[\"GtagSnippet\"])(this.trackers[tracker].ids).then(c => {\n            loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.debug('loading gtag', c);\n            this._gtag = c;\n            this.trackers[tracker].tracker = this._gtag;\n            console.info(`gtag loaded`);\n\n            if (this._ga) {\n              console.warn(`ga and gtag loaded`, this.trackers[tracker].eventQueue.length);\n              const q = this.trackers[tracker].eventQueue;\n              this.trackers[tracker].eventQueue = [];\n\n              while (q.length > 0) {\n                loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info(`tracking queued event`);\n                this.trackEvent(q.shift());\n              }\n            }\n          }).catch(err => {\n            loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.error('Error loading GA', err);\n          });\n          break;\n\n        case 'google_analytics':\n          Object(_ga_loader__WEBPACK_IMPORTED_MODULE_0__[\"UASnippet\"])().then(c => {\n            loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.debug('loading ua', c);\n            this.trackers[tracker].tracker = this._ga;\n            loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.debug('loaded', this.trackers[tracker].tracker, this.trackers[tracker].ids);\n            this.trackers[tracker].tracker('create', this.trackers[tracker].ids[0], `Moovlah_${tracker}`, {\n              storage: 'none'\n            });\n            /**\n            ALWAYS DO THIS BC EXTRA TRACKERS NOT ADDED UNTIL AFTER CONFIG LOADED\n            if(this.trackers[tracker].ids.length > 1) {\n            */\n\n            loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.debug('wiring up broadcast function');\n            this.trackers[tracker].tracker(this.broadcastGoogleAnalytics.bind(this));\n            /**\n            }\n            */\n\n            this.trackers[tracker].tracker('send', 'pageview', this._gaDimensions);\n            console.warn(`ga loaded`);\n\n            if (this._gtag) {\n              console.warn(`ga and gtag loaded`, this.trackers[tracker].eventQueue);\n              const q = this.trackers[tracker].eventQueue;\n              this.trackers[tracker].eventQueue = [];\n\n              while (q.length > 0) {\n                loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info(`tracking queued event`);\n                this.trackEvent(q.shift());\n              }\n            }\n          }).catch(err => {\n            loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.error('Error loading GA', err);\n          });\n          break;\n      }\n    }\n  }\n\n  broadcastGoogleAnalytics(tracker) {\n    loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.debug('broadcastGoogleAnalytics', tracker);\n    this.trackers['google_analytics'].originalSendHitTask = tracker.get('sendHitTask');\n    tracker.set('sendHitTask', this.customGaSendHitTask.bind(this));\n  }\n\n  customGaSendHitTask(model) {\n    loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('running original send hit task', this.trackers['google_analytics'].ids.length);\n    this.trackers['google_analytics'].originalSendHitTask(model);\n\n    for (let i = 1; i < this.trackers['google_analytics'].ids.length; i++) {\n      loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('duplicate sendHitTask duplicate tracking', this.trackers['google_analytics'].ids[i]);\n      const hitPayload = model.get('hitPayload');\n      const trackingId = new RegExp(model.get('trackingId'), 'gi');\n      loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('duplicate sendHitTask duplicate tracking original prop', trackingId);\n      model.set('hitPayload', hitPayload.replace(trackingId, this.trackers['google_analytics'].ids[i]), true);\n      this.trackers['google_analytics'].originalSendHitTask(model);\n    }\n  }\n\n  get _ga() {\n    return window[window.GoogleAnalyticsObject];\n  }\n\n  get _gaDimensions() {\n    let dims = {};\n\n    for (let i = 1; i < this.dimensionsMap.google_analytics.length; i++) {\n      //default to `0` so reports don't omit rows on empty data\n      // log.info(`dim`, this.dimensions, i)\n      dims[`dimension${i}`] = this.dimensions[this.dimensionsMap.google_analytics[i]] || `0`;\n      dims[`dimension${i}`] = dims[`dimension${i}`].toString();\n    }\n\n    loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('ga dims', dims);\n    return dims;\n  }\n\n  get _gTagDimensions() {\n    let dims = {};\n\n    for (let d in this.dimensionsMap.gtag) {\n      //default to `0` so reports don't omit rows on empty data\n      // log.info(`dim`, this.dimensions, i)\n      switch (d) {\n        case 'autoplay':\n          dims['play_strategy'] = this.dimensions[d] ? 'autoplay' : 'click to play';\n          break;\n\n        case 'floating':\n          dims['embed_type'] = this.dimensions[d] ? 'floating' : 'fixed';\n          break;\n\n        case 'ad_unit_id':\n          dims['ad_unit'] = this.dimensions[d] || null;\n          break;\n\n        case 'embedtype':\n          dims['player_tech'] = this.dimensions[d] || null;\n          break;\n\n        default:\n          dims[d] = this.dimensions[d] || null;\n          break;\n      }\n    }\n\n    loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('gtag dims', dims);\n    return dims;\n  }\n\n  updateDimensions(dimensions) {\n    for (let dim in dimensions) {\n      this.dimensions[dim] = `${dimensions[dim]}`;\n      /**\n      const dimidx = this.dimensionsMap.google_analytics.indexOf(dim)\n      if(dimidx > 0) {\n        this.dimensions[`dimension${dimidx}`] = dimensions[dim]\n      } else {\n        console.warn(`No dimension index found for ${dim}`, this.dimensionsMap.google_analytics)\n      }\n      */\n    }\n  }\n\n  updateMetrics(metrics) {\n    loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info(`updateMetrics`, metrics);\n\n    for (let met in metrics) {\n      const metricidx = this.metricMap.google_analytics[met];\n      this.dimensions[`metric${metricidx}`] = metrics[metricidx];\n    }\n  }\n\n  addTracker(trackers) {\n    loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info(`addTracker`, trackers);\n\n    for (let tracker in trackers) {\n      trackers[tracker] = Array.isArray(trackers[tracker]) ? trackers[tracker] : [trackers[tracker]];\n      loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info(`addTracker adding tracker`, trackers[tracker]);\n\n      if (this.trackers[tracker]) {\n        trackers[tracker].map(i => {\n          this.trackers[tracker].ids.push(i);\n        });\n      } else {\n        this.trackers[tracker] = {\n          ids: trackers[tracker]\n        };\n      }\n    }\n  }\n\n  updateVariables(vars) {\n    loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info(`addTracker`, vars);\n\n    for (let v in vars) {\n      const metricidx = this.variableMap.google_analytics[v];\n\n      if (metricidx) {\n        this.variables[metricidx] = vars[v];\n      }\n    }\n  }\n\n  trackEvent(obj) {\n    obj = { ...obj,\n      ...this._gaDimensions\n    };\n\n    for (let tracker in this.trackers) {\n      if (!this.trackers[tracker] || !this.trackers[tracker].ids) {\n        loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('empty tracker so skipping', tracker);\n        continue;\n      }\n\n      if (this.trackers[tracker].ids.length === 0) {\n        loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('empty tracker array so skipping', tracker);\n        continue;\n      } else {\n        loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('have tracker ' + tracker, this.trackers[tracker].ids.length);\n      }\n\n      let dims;\n\n      switch (tracker) {\n        case 'google_analytics':\n          loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('ga tracker', this.trackers[tracker]);\n\n          if (!this._ga) {\n            console.warn(`UA not loaded so queueing`);\n            this.trackers[tracker].eventQueue.push(obj);\n            return;\n          }\n\n          if (this.trackers[tracker]._gaBeacon) {\n            obj.transport = 'beacon';\n            this.trackers[tracker]._gaBeacon = false;\n          }\n\n          this._ga(`send`, `event`, obj);\n\n          break;\n\n        case 'gtag':\n          loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info('gtag tracker', this.trackers[tracker]);\n\n          if (!this._gtag) {\n            console.warn(`Gtag not loaded so queueing`);\n            this.trackers[tracker].eventQueue.push(obj);\n            return;\n          }\n\n          dims = this._gTagDimensions;\n          loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info(dims);\n\n          if (dims.error_code) {\n            dims.error_type = obj.eventCategory;\n          }\n\n          dims.event_category = obj.eventCategory;\n          dims.event_value = obj.eventValue;\n          dims.event_label = obj.eventLabel;\n\n          this._gtag('event', obj.eventAction, dims);\n\n          break;\n      }\n    }\n  }\n\n}\n\n//# sourceURL=webpack://$/./src/tracking/index.js?");

/***/ }),

/***/ "./src/util/dom.js":
/*!*************************!*\
  !*** ./src/util/dom.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("const animateDivPadding = options => {\n  // console.info(`animateDivPadding`, options, options.div.style);\n  return new Promise(function (resolve, reject) {\n    const steps = Math.floor(options.duration / 30) + 1;\n    const startingHeight = +(options.div.style.paddingBottom === \"\" ? 0 : options.div.style.paddingBottom.slice(0, -1));\n    const increment = Math.round(Math.abs(options.newHeight - startingHeight) / steps);\n    const shrinking = startingHeight > options.newHeight; // console.info(`animateDivPadding`, steps, startingHeight, increment, shrinking);\n\n    const adjustHeight = () => {\n      const currentHeight = +(options.div.style.paddingBottom === \"\" ? 0 : options.div.style.paddingBottom.slice(0, -1)); // console.info(`adjustHeight`, currentHeight);\n\n      if (!shrinking) {\n        // growing\n        // console.info(`adjustHeight growing`, currentHeight, increment, options.newHeight);\n        if (currentHeight + increment >= options.newHeight) {\n          // console.info(`adjustHeight incrementing`);\n          options.div.style.paddingBottom = options.paddingBottom + \"%\";\n          resolve();\n          return;\n        } else {\n          // console.info(`setting incrementing`);\n          options.div.style.paddingBottom = currentHeight + increment + \"%\";\n        }\n      } else {\n        // console.info(`adjustHeight shrinking`);\n        // shrinking\n        if (currentHeight - increment <= options.newHeight) {\n          options.div.style.paddingBottom = options.newHeight + \"%\";\n          resolve();\n          return;\n        } else {\n          options.div.style.paddingBottom = currentHeight - increment + \"%\";\n        }\n      }\n\n      setTimeout(adjustHeight, 30);\n    };\n\n    adjustHeight();\n  });\n};\n\nconst animateDivHeight = options => {\n  return new Promise(function (resolve, reject) {\n    const steps = Math.floor(options.duration / 30) + 1;\n    const startingHeight = +(options.div.style.height === \"\" ? 0 : options.div.style.height.slice(0, -2));\n    const increment = Math.round(Math.abs(options.newHeight - startingHeight) / steps);\n    const shrinking = startingHeight > options.newHeight;\n\n    const adjustHeight = () => {\n      const currentHeight = +(options.div.style.height === \"\" ? 0 : options.div.style.height.slice(0, -2));\n\n      if (!shrinking) {\n        // growing\n        if (currentHeight + increment >= options.newHeight) {\n          options.div.style.height = options.newHeight + \"px\";\n          resolve();\n          return;\n        } else {\n          options.div.style.height = currentHeight + increment + \"px\";\n        }\n      } else {\n        // shrinking\n        if (currentHeight - increment <= options.newHeight) {\n          options.div.style.height = options.newHeight + \"px\";\n          resolve();\n          return;\n        } else {\n          options.div.style.height = currentHeight - increment + \"px\";\n        }\n      }\n\n      setTimeout(adjustHeight, 30);\n    };\n\n    adjustHeight();\n  });\n};\n\nmodule.exports = {\n  animateDivHeight: animateDivHeight,\n  animateDivPadding: animateDivPadding\n};\n\n//# sourceURL=webpack://$/./src/util/dom.js?");

/***/ }),

/***/ "./src/util/strings.js":
/*!*****************************!*\
  !*** ./src/util/strings.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("const camelize = myString => {\n  return myString.replace(/-([a-z])/g, function (g) {\n    return g[1].toUpperCase();\n  });\n};\n\nconst uncamelize = myString => {\n  return myString.replace(/[A-Z]/g, '-$&').toLowerCase();\n};\n\nconst serializeParams = (obj, prefix) => {\n  let str = [],\n      p;\n\n  for (p in obj) {\n    if (obj.hasOwnProperty(p)) {\n      const k = prefix ? prefix + `[${p}]` : p,\n            v = obj[p];\n      str.push(v !== null && typeof v === `object` ? serialize(v, k) : encodeURIComponent(k) + `=` + encodeURIComponent(v));\n    }\n  }\n\n  return str.join(`&`);\n};\n\nmodule.exports = {\n  camelize: camelize,\n  uncamelize: uncamelize,\n  serializeParams: serializeParams\n};\n\n//# sourceURL=webpack://$/./src/util/strings.js?");

/***/ })

/******/ });
});